/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/* Zepto v1.0 - polyfill zepto detect event ajax form fx - zeptojs.com/license */

//     Underscore.js 1.4.4
//     http://underscorejs.org
//     (c) 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
//     Underscore may be freely distributed under the MIT license.

//     (c) 2010-2013 Jeremy Ashkenas, DocumentCloud Inc.
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

/*

Copyright (C) 2011 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/

/*
Copyright (c) 2011-2013 @WalmartLabs

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to
deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
sell copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
DEALINGS IN THE SOFTWARE.
*/

var requirejs,require,define;!function(t){function e(t,e){return v.call(t,e)}function n(t,e){var n,i,r,o,s,a,l,u,c,h,f,d=e&&e.split("/"),p=m.map,g=p&&p["*"]||{};if(t&&"."===t.charAt(0))if(e){for(d=d.slice(0,d.length-1),t=t.split("/"),s=t.length-1,m.nodeIdCompat&&_.test(t[s])&&(t[s]=t[s].replace(_,"")),t=d.concat(t),c=0;c<t.length;c+=1)if(f=t[c],"."===f)t.splice(c,1),c-=1;else if(".."===f){if(1===c&&(".."===t[2]||".."===t[0]))break;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((d||g)&&p){for(n=t.split("/"),c=n.length;c>0;c-=1){if(i=n.slice(0,c).join("/"),d)for(h=d.length;h>0;h-=1)if(r=p[d.slice(0,h).join("/")],r&&(r=r[i])){o=r,a=c;break}if(o)break;!l&&g&&g[i]&&(l=g[i],u=c)}!o&&l&&(o=l,a=u),o&&(n.splice(0,a,o),t=n.join("/"))}return t}function i(e,n){return function(){return c.apply(t,y.call(arguments,0).concat([e,n]))}}function r(t){return function(e){return n(e,t)}}function o(t){return function(e){d[t]=e}}function s(n){if(e(p,n)){var i=p[n];delete p[n],g[n]=!0,u.apply(t,i)}if(!e(d,n)&&!e(g,n))throw new Error("No "+n);return d[n]}function a(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function l(t){return function(){return m&&m.config&&m.config[t]||{}}}var u,c,h,f,d={},p={},m={},g={},v=Object.prototype.hasOwnProperty,y=[].slice,_=/\.js$/;h=function(t,e){var i,o=a(t),l=o[0];return t=o[1],l&&(l=n(l,e),i=s(l)),l?t=i&&i.normalize?i.normalize(t,r(e)):n(t,e):(t=n(t,e),o=a(t),l=o[0],t=o[1],l&&(i=s(l))),{f:l?l+"!"+t:t,n:t,pr:l,p:i}},f={require:function(t){return i(t)},exports:function(t){var e=d[t];return"undefined"!=typeof e?e:d[t]={}},module:function(t){return{id:t,uri:"",exports:d[t],config:l(t)}}},u=function(n,r,a,l){var u,c,m,v,y,_,b=[],w=typeof a;if(l=l||n,"undefined"===w||"function"===w){for(r=!r.length&&a.length?["require","exports","module"]:r,y=0;y<r.length;y+=1)if(v=h(r[y],l),c=v.f,"require"===c)b[y]=f.require(n);else if("exports"===c)b[y]=f.exports(n),_=!0;else if("module"===c)u=b[y]=f.module(n);else if(e(d,c)||e(p,c)||e(g,c))b[y]=s(c);else{if(!v.p)throw new Error(n+" missing "+c);v.p.load(v.n,i(l,!0),o(c),{}),b[y]=d[c]}m=a?a.apply(d[n],b):void 0,n&&(u&&u.exports!==t&&u.exports!==d[n]?d[n]=u.exports:m===t&&_||(d[n]=m))}else n&&(d[n]=a)},requirejs=require=c=function(e,n,i,r,o){if("string"==typeof e)return f[e]?f[e](n):s(h(e,n).f);if(!e.splice){if(m=e,m.deps&&c(m.deps,m.callback),!n)return;n.splice?(e=n,n=i,i=null):e=t}return n=n||function(){},"function"==typeof i&&(i=r,r=o),r?u(t,e,n,i):setTimeout(function(){u(t,e,n,i)},4),c},c.config=function(t){return c(t)},requirejs._defined=d,define=function(t,n,i){n.splice||(i=n,n=[]),e(d,t)||e(p,t)||(p[t]=[t,n,i])},define.amd={jQuery:!0}}(),define("../bower_components/almond/almond",function(){}),function(t){String.prototype.trim===t&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.reduce===t&&(Array.prototype.reduce=function(e){if(void 0===this||null===this)throw new TypeError;var n,i=Object(this),r=i.length>>>0,o=0;if("function"!=typeof e)throw new TypeError;if(0==r&&1==arguments.length)throw new TypeError;if(arguments.length>=2)n=arguments[1];else for(;;){if(o in i){n=i[o++];break}if(++o>=r)throw new TypeError}for(;r>o;)o in i&&(n=e.call(t,n,i[o],o,i)),o++;return n})}();var Zepto=function(){function t(t){return null==t?String(t):J[Q.call(t)]||"object"}function e(e){return"function"==t(e)}function n(t){return null!=t&&t==t.window}function i(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function r(e){return"object"==t(e)}function o(t){return r(t)&&!n(t)&&t.__proto__==Object.prototype}function s(t){return t instanceof Array}function a(t){return"number"==typeof t.length}function l(t){return H.call(t,function(t){return null!=t})}function u(t){return t.length>0?C.fn.concat.apply([],t):t}function c(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function h(t){return t in $?$[t]:$[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function f(t,e){return"number"!=typeof e||I[c(t)]?e:e+"px"}function d(t){var e,n;return N[t]||(e=V.createElement(t),V.body.appendChild(e),n=A(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),N[t]=n),N[t]}function p(t){return"children"in t?S.call(t.children):C.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function m(t,e,n){for(E in e)n&&(o(e[E])||s(e[E]))?(o(e[E])&&!o(t[E])&&(t[E]={}),s(e[E])&&!s(t[E])&&(t[E]=[]),m(t[E],e[E],n)):e[E]!==x&&(t[E]=e[E])}function g(t,e){return e===x?C(t):C(t).filter(e)}function v(t,n,i,r){return e(n)?n.call(t,i,r):n}function y(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function _(t,e){var n=t.className,i=n&&n.baseVal!==x;return e===x?i?n.baseVal:n:void(i?n.baseVal=e:t.className=e)}function b(t){var e;try{return t?"true"==t||("false"==t?!1:"null"==t?null:isNaN(e=Number(t))?/^[\[\{]/.test(t)?C.parseJSON(t):t:e):t}catch(n){return t}}function w(t,e){e(t);for(var n in t.childNodes)w(t.childNodes[n],e)}var x,E,C,T,k,O,j=[],S=j.slice,H=j.filter,V=window.document,N={},$={},A=V.defaultView.getComputedStyle,I={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},M=/^\s*<(\w+|!)[^>]*>/,F=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,P=/^(?:body|html)$/i,R=["val","css","html","text","data","width","height","offset"],U=["after","prepend","before","append"],D=V.createElement("table"),B=V.createElement("tr"),L={tr:V.createElement("tbody"),tbody:D,thead:D,tfoot:D,td:B,th:B,"*":V.createElement("div")},q=/complete|loaded|interactive/,z=/^\.([\w-]+)$/,Z=/^#([\w-]*)$/,W=/^[\w-]+$/,J={},Q=J.toString,X={},G=V.createElement("div");return X.matches=function(t,e){if(!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,r=t.parentNode,o=!r;return o&&(r=G).appendChild(t),i=~X.qsa(r,e).indexOf(t),o&&G.removeChild(t),i},k=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},O=function(t){return H.call(t,function(e,n){return t.indexOf(e)==n})},X.fragment=function(t,e,n){t.replace&&(t=t.replace(F,"<$1></$2>")),e===x&&(e=M.test(t)&&RegExp.$1),e in L||(e="*");var i,r,s=L[e];return s.innerHTML=""+t,r=C.each(S.call(s.childNodes),function(){s.removeChild(this)}),o(n)&&(i=C(r),C.each(n,function(t,e){R.indexOf(t)>-1?i[t](e):i.attr(t,e)})),r},X.Z=function(t,e){return t=t||[],t.__proto__=C.fn,t.selector=e||"",t},X.isZ=function(t){return t instanceof X.Z},X.init=function(t,n){if(t){if(e(t))return C(V).ready(t);if(X.isZ(t))return t;var i;if(s(t))i=l(t);else if(r(t))i=[o(t)?C.extend({},t):t],t=null;else if(M.test(t))i=X.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==x)return C(n).find(t);i=X.qsa(V,t)}return X.Z(i,t)}return X.Z()},C=function(t,e){return X.init(t,e)},C.extend=function(t){var e,n=S.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){m(t,n,e)}),t},X.qsa=function(t,e){var n;return i(t)&&Z.test(e)?(n=t.getElementById(RegExp.$1))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:S.call(z.test(e)?t.getElementsByClassName(RegExp.$1):W.test(e)?t.getElementsByTagName(e):t.querySelectorAll(e))},C.contains=function(t,e){return t!==e&&t.contains(e)},C.type=t,C.isFunction=e,C.isWindow=n,C.isArray=s,C.isPlainObject=o,C.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},C.inArray=function(t,e,n){return j.indexOf.call(e,t,n)},C.camelCase=k,C.trim=function(t){return t.trim()},C.uuid=0,C.support={},C.expr={},C.map=function(t,e){var n,i,r,o=[];if(a(t))for(i=0;i<t.length;i++)n=e(t[i],i),null!=n&&o.push(n);else for(r in t)n=e(t[r],r),null!=n&&o.push(n);return u(o)},C.each=function(t,e){var n,i;if(a(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(i in t)if(e.call(t[i],i,t[i])===!1)return t;return t},C.grep=function(t,e){return H.call(t,e)},window.JSON&&(C.parseJSON=JSON.parse),C.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){J["[object "+e+"]"]=e.toLowerCase()}),C.fn={forEach:j.forEach,reduce:j.reduce,push:j.push,sort:j.sort,indexOf:j.indexOf,concat:j.concat,map:function(t){return C(C.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return C(S.apply(this,arguments))},ready:function(t){return q.test(V.readyState)?t(C):V.addEventListener("DOMContentLoaded",function(){t(C)},!1),this},get:function(t){return t===x?S.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return j.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return e(t)?this.not(this.not(t)):C(H.call(this,function(e){return X.matches(e,t)}))},add:function(t,e){return C(O(this.concat(C(t,e))))},is:function(t){return this.length>0&&X.matches(this[0],t)},not:function(t){var n=[];if(e(t)&&t.call!==x)this.each(function(e){t.call(this,e)||n.push(this)});else{var i="string"==typeof t?this.filter(t):a(t)&&e(t.item)?S.call(t):C(t);this.forEach(function(t){i.indexOf(t)<0&&n.push(t)})}return C(n)},has:function(t){return this.filter(function(){return r(t)?C.contains(this,t):C(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!r(t)?t:C(t)},last:function(){var t=this[this.length-1];return t&&!r(t)?t:C(t)},find:function(t){var e,n=this;return e="object"==typeof t?C(t).filter(function(){var t=this;return j.some.call(n,function(e){return C.contains(e,t)})}):1==this.length?C(X.qsa(this[0],t)):this.map(function(){return X.qsa(this,t)})},closest:function(t,e){var n=this[0],r=!1;for("object"==typeof t&&(r=C(t));n&&!(r?r.indexOf(n)>=0:X.matches(n,t));)n=n!==e&&!i(n)&&n.parentNode;return C(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=C.map(n,function(t){return(t=t.parentNode)&&!i(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return g(e,t)},parent:function(t){return g(O(this.pluck("parentNode")),t)},children:function(t){return g(this.map(function(){return p(this)}),t)},contents:function(){return this.map(function(){return S.call(this.childNodes)})},siblings:function(t){return g(this.map(function(t,e){return H.call(p(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return C.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null),"none"==A(this,"").getPropertyValue("display")&&(this.style.display=d(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var n=e(t);if(this[0]&&!n)var i=C(t).get(0),r=i.parentNode||this.length>1;return this.each(function(e){C(this).wrapAll(n?t.call(this,e):r?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){C(this[0]).before(t=C(t));for(var e;(e=t.children()).length;)t=e.first();C(t).append(this)}return this},wrapInner:function(t){var n=e(t);return this.each(function(e){var i=C(this),r=i.contents(),o=n?t.call(this,e):t;r.length?r.wrapAll(o):i.append(o)})},unwrap:function(){return this.parent().each(function(){C(this).replaceWith(C(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=C(this);(t===x?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return C(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return C(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return t===x?this.length>0?this[0].innerHTML:null:this.each(function(e){var n=this.innerHTML;C(this).empty().append(v(this,t,e,n))})},text:function(t){return t===x?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=t})},attr:function(t,e){var n;return"string"==typeof t&&e===x?0==this.length||1!==this[0].nodeType?x:"value"==t&&"INPUT"==this[0].nodeName?this.val():!(n=this[0].getAttribute(t))&&t in this[0]?this[0][t]:n:this.each(function(n){if(1===this.nodeType)if(r(t))for(E in t)y(this,E,t[E]);else y(this,t,v(this,e,n,this.getAttribute(t)))})},removeAttr:function(t){return this.each(function(){1===this.nodeType&&y(this,t)})},prop:function(t,e){return e===x?this[0]&&this[0][t]:this.each(function(n){this[t]=v(this,e,n,this[t])})},data:function(t,e){var n=this.attr("data-"+c(t),e);return null!==n?b(n):x},val:function(t){return t===x?this[0]&&(this[0].multiple?C(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(e){this.value=v(this,t,e,this.value)})},offset:function(t){if(t)return this.each(function(e){var n=C(this),i=v(this,t,e,n.offset()),r=n.offsetParent().offset(),o={top:i.top-r.top,left:i.left-r.left};"static"==n.css("position")&&(o.position="relative"),n.css(o)});if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,n){if(arguments.length<2&&"string"==typeof e)return this[0]&&(this[0].style[k(e)]||A(this[0],"").getPropertyValue(e));var i="";if("string"==t(e))n||0===n?i=c(e)+":"+f(e,n):this.each(function(){this.style.removeProperty(c(e))});else for(E in e)e[E]||0===e[E]?i+=c(E)+":"+f(E,e[E])+";":this.each(function(){this.style.removeProperty(c(E))});return this.each(function(){this.style.cssText+=";"+i})},index:function(t){return t?this.indexOf(C(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return j.some.call(this,function(t){return this.test(_(t))},h(t))},addClass:function(t){return this.each(function(e){T=[];var n=_(this),i=v(this,t,e,n);i.split(/\s+/g).forEach(function(t){C(this).hasClass(t)||T.push(t)},this),T.length&&_(this,n+(n?" ":"")+T.join(" "))})},removeClass:function(t){return this.each(function(e){return t===x?_(this,""):(T=_(this),v(this,t,e,T).split(/\s+/g).forEach(function(t){T=T.replace(h(t)," ")}),void _(this,T.trim()))})},toggleClass:function(t,e){return this.each(function(n){var i=C(this),r=v(this,t,n,_(this));r.split(/\s+/g).forEach(function(t){(e===x?!i.hasClass(t):e)?i.addClass(t):i.removeClass(t)})})},scrollTop:function(){return this.length?"scrollTop"in this[0]?this[0].scrollTop:this[0].scrollY:void 0},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),i=P.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(C(t).css("margin-top"))||0,n.left-=parseFloat(C(t).css("margin-left"))||0,i.top+=parseFloat(C(e[0]).css("border-top-width"))||0,i.left+=parseFloat(C(e[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||V.body;t&&!P.test(t.nodeName)&&"static"==C(t).css("position");)t=t.offsetParent;return t})}},C.fn.detach=C.fn.remove,["width","height"].forEach(function(t){C.fn[t]=function(e){var r,o=this[0],s=t.replace(/./,function(t){return t[0].toUpperCase()});return e===x?n(o)?o["inner"+s]:i(o)?o.documentElement["offset"+s]:(r=this.offset())&&r[t]:this.each(function(n){o=C(this),o.css(t,v(this,e,n,o[t]()))})}}),U.forEach(function(e,n){var i=n%2;C.fn[e]=function(){var e,r,o=C.map(arguments,function(n){return e=t(n),"object"==e||"array"==e||null==n?n:X.fragment(n)}),s=this.length>1;return o.length<1?this:this.each(function(t,e){r=i?e:e.parentNode,e=0==n?e.nextSibling:1==n?e.firstChild:2==n?e:null,o.forEach(function(t){if(s)t=t.cloneNode(!0);else if(!r)return C(t).remove();w(r.insertBefore(t,e),function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},C.fn[i?e+"To":"insert"+(n?"Before":"After")]=function(t){return C(t)[e](this),this}}),X.Z.prototype=C.fn,X.uniq=O,X.deserializeValue=b,C.zepto=X,C}();window.Zepto=Zepto,"$"in window||(window.$=Zepto),function(t){function e(t){var e=this.os={},n=this.browser={},i=t.match(/WebKit\/([\d.]+)/),r=t.match(/(Android)\s+([\d.]+)/),o=t.match(/(iPad).*OS\s([\d_]+)/),s=!o&&t.match(/(iPhone\sOS)\s([\d_]+)/),a=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),l=a&&t.match(/TouchPad/),u=t.match(/Kindle\/([\d.]+)/),c=t.match(/Silk\/([\d._]+)/),h=t.match(/(BlackBerry).*Version\/([\d.]+)/),f=t.match(/(BB10).*Version\/([\d.]+)/),d=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),p=t.match(/PlayBook/),m=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),g=t.match(/Firefox\/([\d.]+)/);(n.webkit=!!i)&&(n.version=i[1]),r&&(e.android=!0,e.version=r[2]),s&&(e.ios=e.iphone=!0,e.version=s[2].replace(/_/g,".")),o&&(e.ios=e.ipad=!0,e.version=o[2].replace(/_/g,".")),a&&(e.webos=!0,e.version=a[2]),l&&(e.touchpad=!0),h&&(e.blackberry=!0,e.version=h[2]),f&&(e.bb10=!0,e.version=f[2]),d&&(e.rimtabletos=!0,e.version=d[2]),p&&(n.playbook=!0),u&&(e.kindle=!0,e.version=u[1]),c&&(n.silk=!0,n.version=c[1]),!c&&e.android&&t.match(/Kindle Fire/)&&(n.silk=!0),m&&(n.chrome=!0,n.version=m[1]),g&&(n.firefox=!0,n.version=g[1]),e.tablet=!!(o||p||r&&!t.match(/Mobile/)||g&&t.match(/Tablet/)),e.phone=!(e.tablet||!(r||s||a||h||f||m&&t.match(/Android/)||m&&t.match(/CriOS\/([\d.]+)/)||g&&t.match(/Mobile/)))}e.call(t,navigator.userAgent),t.__detect=e}(Zepto),function(t){function e(t){return t._zid||(t._zid=d++)}function n(t,n,o,s){if(n=i(n),n.ns)var a=r(n.ns);return(f[e(t)]||[]).filter(function(t){return!(!t||n.e&&t.e!=n.e||n.ns&&!a.test(t.ns)||o&&e(t.fn)!==e(o)||s&&t.sel!=s)})}function i(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function r(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function o(e,n,i){"string"!=t.type(e)?t.each(e,i):e.split(/\s/).forEach(function(t){i(t,n)})}function s(t,e){return t.del&&("focus"==t.e||"blur"==t.e)||!!e}function a(t){return m[t]||t}function l(n,r,l,u,c,h){var d=e(n),p=f[d]||(f[d]=[]);o(r,l,function(e,r){var o=i(e);o.fn=r,o.sel=u,o.e in m&&(r=function(e){var n=e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?o.fn.apply(this,arguments):void 0}),o.del=c&&c(r,e);var l=o.del||r;o.proxy=function(t){var e=l.apply(n,[t].concat(t.data));return e===!1&&(t.preventDefault(),t.stopPropagation()),e},o.i=p.length,p.push(o),n.addEventListener(a(o.e),o.proxy,s(o,h))})}function u(t,i,r,l,u){var c=e(t);o(i||"",r,function(e,i){n(t,e,i,l).forEach(function(e){delete f[c][e.i],t.removeEventListener(a(e.e),e.proxy,s(e,u))})})}function c(e){var n,i={originalEvent:e};for(n in e)y.test(n)||void 0===e[n]||(i[n]=e[n]);return t.each(_,function(t,n){i[t]=function(){return this[n]=g,e[t].apply(e,arguments)},i[n]=v}),i}function h(t){if(!("defaultPrevented"in t)){t.defaultPrevented=!1;var e=t.preventDefault;t.preventDefault=function(){this.defaultPrevented=!0,e.call(this)}}}var f=(t.zepto.qsa,{}),d=1,p={},m={mouseenter:"mouseover",mouseleave:"mouseout"};p.click=p.mousedown=p.mouseup=p.mousemove="MouseEvents",t.event={add:l,remove:u},t.proxy=function(n,i){if(t.isFunction(n)){var r=function(){return n.apply(i,arguments)};return r._zid=e(n),r}if("string"==typeof i)return t.proxy(n[i],n);throw new TypeError("expected function")},t.fn.bind=function(t,e){return this.each(function(){l(this,t,e)})},t.fn.unbind=function(t,e){return this.each(function(){u(this,t,e)})},t.fn.one=function(t,e){return this.each(function(n,i){l(this,t,e,null,function(t,e){return function(){var n=t.apply(i,arguments);return u(i,e,t),n}})})};var g=function(){return!0},v=function(){return!1},y=/^([A-Z]|layer[XY]$)/,_={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(e,n,i){return this.each(function(r,o){l(o,n,i,e,function(n){return function(i){var r,s=t(i.target).closest(e,o).get(0);return s?(r=t.extend(c(i),{currentTarget:s,liveFired:o}),n.apply(s,[r].concat([].slice.call(arguments,1)))):void 0}})})},t.fn.undelegate=function(t,e,n){return this.each(function(){u(this,e,n,t)})},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,n,i){return!n||t.isFunction(n)?this.bind(e,n||i):this.delegate(n,e,i)},t.fn.off=function(e,n,i){return!n||t.isFunction(n)?this.unbind(e,n||i):this.undelegate(n,e,i)},t.fn.trigger=function(e,n){return("string"==typeof e||t.isPlainObject(e))&&(e=t.Event(e)),h(e),e.data=n,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(e)})},t.fn.triggerHandler=function(e,i){var r,o;return this.each(function(s,a){r=c("string"==typeof e?t.Event(e):e),r.data=i,r.target=a,t.each(n(a,e.type||e),function(t,e){return o=e.proxy(r),r.isImmediatePropagationStopped()?!1:void 0})}),o},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.trigger(e)}}),["focus","blur"].forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.each(function(){try{this[e]()}catch(t){}}),this}}),t.Event=function(t,e){"string"!=typeof t&&(e=t,t=e.type);var n=document.createEvent(p[t]||"Events"),i=!0;if(e)for(var r in e)"bubbles"==r?i=!!e[r]:n[r]=e[r];return n.initEvent(t,i,!0,null,null,null,null,null,null,null,null,null,null,null,null),n.isDefaultPrevented=function(){return this.defaultPrevented},n}}(Zepto),function(t){function e(e,n,i){var r=t.Event(n);return t(e).trigger(r,i),!r.defaultPrevented}function n(t,n,i,r){return t.global?e(n||y,i,r):void 0}function i(e){e.global&&0===t.active++&&n(e,null,"ajaxStart")}function r(e){e.global&&!--t.active&&n(e,null,"ajaxStop")}function o(t,e){var i=e.context;return e.beforeSend.call(i,t,e)===!1||n(e,i,"ajaxBeforeSend",[t,e])===!1?!1:void n(e,i,"ajaxSend",[t,e])}function s(t,e,i){var r=i.context,o="success";i.success.call(r,t,o,e),n(i,r,"ajaxSuccess",[e,i,t]),l(o,e,i)}function a(t,e,i,r){var o=r.context;r.error.call(o,i,e,t),n(r,o,"ajaxError",[i,r,t]),l(e,i,r)}function l(t,e,i){var o=i.context;i.complete.call(o,e,t),n(i,o,"ajaxComplete",[e,i]),r(i)}function u(){}function c(t){return t&&(t=t.split(";",2)[0]),t&&(t==E?"html":t==x?"json":b.test(t)?"script":w.test(t)&&"xml")||"text"}function h(t,e){return(t+"&"+e).replace(/[&?]{1,2}/,"?")}function f(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=h(e.url,e.data))}function d(e,n,i,r){var o=!t.isFunction(n);return{url:e,data:o?n:void 0,success:o?t.isFunction(i)?i:void 0:n,dataType:o?r||i:i}}function p(e,n,i,r){var o,s=t.isArray(n);t.each(n,function(n,a){o=t.type(a),r&&(n=i?r:r+"["+(s?"":n)+"]"),!r&&s?e.add(a.name,a.value):"array"==o||!i&&"object"==o?p(e,a,i,n):e.add(n,a)})}var m,g,v=0,y=window.document,_=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,b=/^(?:text|application)\/javascript/i,w=/^(?:text|application)\/xml/i,x="application/json",E="text/html",C=/^\s*$/;t.active=0,t.ajaxJSONP=function(e){if(!("type"in e))return t.ajax(e);var n,i="jsonp"+ ++v,r=y.createElement("script"),l=function(){clearTimeout(n),t(r).remove(),delete window[i]},c=function(t){l(),t&&"timeout"!=t||(window[i]=u),a(null,t||"abort",h,e)},h={abort:c};return o(h,e)===!1?(c("abort"),!1):(window[i]=function(t){l(),s(t,h,e)},r.onerror=function(){c("error")},r.src=e.url.replace(/=\?/,"="+i),t("head").append(r),e.timeout>0&&(n=setTimeout(function(){c("timeout")},e.timeout)),h)},t.ajaxSettings={type:"GET",beforeSend:u,success:u,error:u,complete:u,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:x,xml:"application/xml, text/xml",html:E,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var n=t.extend({},e||{});for(m in t.ajaxSettings)void 0===n[m]&&(n[m]=t.ajaxSettings[m]);i(n),n.crossDomain||(n.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n.url)&&RegExp.$2!=window.location.host),n.url||(n.url=window.location.toString()),f(n),n.cache===!1&&(n.url=h(n.url,"_="+Date.now()));var r=n.dataType,l=/=\?/.test(n.url);if("jsonp"==r||l)return l||(n.url=h(n.url,"callback=?")),t.ajaxJSONP(n);var d,p=n.accepts[r],v={},y=/^([\w-]+:)\/\//.test(n.url)?RegExp.$1:window.location.protocol,_=n.xhr();n.crossDomain||(v["X-Requested-With"]="XMLHttpRequest"),p&&(v.Accept=p,p.indexOf(",")>-1&&(p=p.split(",",2)[0]),_.overrideMimeType&&_.overrideMimeType(p)),(n.contentType||n.contentType!==!1&&n.data&&"GET"!=n.type.toUpperCase())&&(v["Content-Type"]=n.contentType||"application/x-www-form-urlencoded"),n.headers=t.extend(v,n.headers||{}),_.onreadystatechange=function(){if(4==_.readyState){_.onreadystatechange=u,clearTimeout(d);var e,i=!1;if(_.status>=200&&_.status<300||304==_.status||0==_.status&&"file:"==y){r=r||c(_.getResponseHeader("content-type")),e=_.responseText;try{"script"==r?(1,eval)(e):"xml"==r?e=_.responseXML:"json"==r&&(e=C.test(e)?null:t.parseJSON(e))}catch(o){i=o}i?a(i,"parsererror",_,n):s(e,_,n)}else a(null,_.status?"error":"abort",_,n)}};var b="async"in n?n.async:!0;_.open(n.type,n.url,b);for(g in n.headers)_.setRequestHeader(g,n.headers[g]);return o(_,n)===!1?(_.abort(),!1):(n.timeout>0&&(d=setTimeout(function(){_.onreadystatechange=u,_.abort(),a(null,"timeout",_,n)},n.timeout)),_.send(n.data?n.data:null),_)},t.get=function(){return t.ajax(d.apply(null,arguments))},t.post=function(){var e=d.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=d.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,n,i){if(!this.length)return this;var r,o=this,s=e.split(/\s/),a=d(e,n,i),l=a.success;return s.length>1&&(a.url=s[0],r=s[1]),a.success=function(e){o.html(r?t("<div>").html(e.replace(_,"")).find(r):e),l&&l.apply(o,arguments)},t.ajax(a),this};var T=encodeURIComponent;t.param=function(t,e){var n=[];return n.add=function(t,e){this.push(T(t)+"="+T(e))},p(n,t,e),n.join("&").replace(/%20/g,"+")}}(Zepto),function(t){t.fn.serializeArray=function(){var e,n=[];return t(Array.prototype.slice.call(this.get(0).elements)).each(function(){e=t(this);var i=e.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&("radio"!=i&&"checkbox"!=i||this.checked)&&n.push({name:e.attr("name"),value:e.val()})}),n},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.defaultPrevented||this.get(0).submit()}return this}}(Zepto),function(t,e){function n(t){return i(t.replace(/([a-z])([A-Z])/,"$1-$2"))}function i(t){return t.toLowerCase()}function r(t){return o?o+t:i(t)}var o,s,a,l,u,c,h,f,d="",p={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},m=window.document,g=m.createElement("div"),v=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,y={};t.each(p,function(t,n){return g.style[t+"TransitionProperty"]!==e?(d="-"+i(t)+"-",o=n,!1):void 0}),s=d+"transform",y[a=d+"transition-property"]=y[l=d+"transition-duration"]=y[u=d+"transition-timing-function"]=y[c=d+"animation-name"]=y[h=d+"animation-duration"]=y[f=d+"animation-timing-function"]="",t.fx={off:o===e&&g.style.transitionProperty===e,speeds:{_default:400,fast:200,slow:600},cssPrefix:d,transitionEnd:r("TransitionEnd"),animationEnd:r("AnimationEnd")},t.fn.animate=function(e,n,i,r){return t.isPlainObject(n)&&(i=n.easing,r=n.complete,n=n.duration),n&&(n=("number"==typeof n?n:t.fx.speeds[n]||t.fx.speeds._default)/1e3),this.anim(e,n,i,r)},t.fn.anim=function(i,r,o,d){var p,m,g,_={},b="",w=this,x=t.fx.transitionEnd;if(r===e&&(r=.4),t.fx.off&&(r=0),"string"==typeof i)_[c]=i,_[h]=r+"s",_[f]=o||"linear",x=t.fx.animationEnd;else{m=[];for(p in i)v.test(p)?b+=p+"("+i[p]+") ":(_[p]=i[p],m.push(n(p)));b&&(_[s]=b,m.push(s)),r>0&&"object"==typeof i&&(_[a]=m.join(", "),_[l]=r+"s",_[u]=o||"linear")}return g=function(e){if("undefined"!=typeof e){if(e.target!==e.currentTarget)return;t(e.target).unbind(x,g)}t(this).css(y),d&&d.call(this)},r>0&&this.bind(x,g),this.size()&&this.get(0).clientLeft,this.css(_),0>=r&&setTimeout(function(){w.each(function(){g.call(this)})},0),this},g=null}(Zepto),define("zepto",function(t){return function(){var e;return e||t.$}}(this)),function(){var t=this,e=t._,n={},i=Array.prototype,r=Object.prototype,o=Function.prototype,s=i.push,a=i.slice,l=i.concat,u=r.toString,c=r.hasOwnProperty,h=i.forEach,f=i.map,d=i.reduce,p=i.reduceRight,m=i.filter,g=i.every,v=i.some,y=i.indexOf,_=i.lastIndexOf,b=Array.isArray,w=Object.keys,x=o.bind,E=function(t){return t instanceof E?t:this instanceof E?void(this._wrapped=t):new E(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=E),exports._=E):t._=E,E.VERSION="1.4.4";var C=E.each=E.forEach=function(t,e,i){if(null!=t)if(h&&t.forEach===h)t.forEach(e,i);else if(t.length===+t.length){for(var r=0,o=t.length;o>r;r++)if(e.call(i,t[r],r,t)===n)return}else for(var s in t)if(E.has(t,s)&&e.call(i,t[s],s,t)===n)return};E.map=E.collect=function(t,e,n){var i=[];return null==t?i:f&&t.map===f?t.map(e,n):(C(t,function(t,r,o){i[i.length]=e.call(n,t,r,o)}),i)};var T="Reduce of empty array with no initial value";E.reduce=E.foldl=E.inject=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),d&&t.reduce===d)return i&&(e=E.bind(e,i)),r?t.reduce(e,n):t.reduce(e);if(C(t,function(t,o,s){r?n=e.call(i,n,t,o,s):(n=t,r=!0)}),!r)throw new TypeError(T);return n},E.reduceRight=E.foldr=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),p&&t.reduceRight===p)return i&&(e=E.bind(e,i)),r?t.reduceRight(e,n):t.reduceRight(e);var o=t.length;if(o!==+o){var s=E.keys(t);o=s.length}if(C(t,function(a,l,u){l=s?s[--o]:--o,r?n=e.call(i,n,t[l],l,u):(n=t[l],r=!0)}),!r)throw new TypeError(T);return n},E.find=E.detect=function(t,e,n){var i;return k(t,function(t,r,o){return e.call(n,t,r,o)?(i=t,!0):void 0}),i},E.filter=E.select=function(t,e,n){var i=[];return null==t?i:m&&t.filter===m?t.filter(e,n):(C(t,function(t,r,o){e.call(n,t,r,o)&&(i[i.length]=t)}),i)},E.reject=function(t,e,n){return E.filter(t,function(t,i,r){return!e.call(n,t,i,r)},n)},E.every=E.all=function(t,e,i){e||(e=E.identity);var r=!0;return null==t?r:g&&t.every===g?t.every(e,i):(C(t,function(t,o,s){return(r=r&&e.call(i,t,o,s))?void 0:n}),!!r)};var k=E.some=E.any=function(t,e,i){e||(e=E.identity);var r=!1;return null==t?r:v&&t.some===v?t.some(e,i):(C(t,function(t,o,s){return r||(r=e.call(i,t,o,s))?n:void 0}),!!r)};E.contains=E.include=function(t,e){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(e):k(t,function(t){return t===e})},E.invoke=function(t,e){var n=a.call(arguments,2),i=E.isFunction(e);return E.map(t,function(t){return(i?e:t[e]).apply(t,n)})},E.pluck=function(t,e){return E.map(t,function(t){return t[e]})},E.where=function(t,e,n){return E.isEmpty(e)?n?null:[]:E[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},E.findWhere=function(t,e){return E.where(t,e,!0)},E.max=function(t,e,n){if(!e&&E.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&E.isEmpty(t))return-1/0;var i={computed:-1/0,value:-1/0};return C(t,function(t,r,o){var s=e?e.call(n,t,r,o):t;s>=i.computed&&(i={value:t,computed:s})}),i.value},E.min=function(t,e,n){if(!e&&E.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&E.isEmpty(t))return 1/0;var i={computed:1/0,value:1/0};return C(t,function(t,r,o){var s=e?e.call(n,t,r,o):t;s<i.computed&&(i={value:t,computed:s})}),i.value},E.shuffle=function(t){var e,n=0,i=[];return C(t,function(t){e=E.random(n++),i[n-1]=i[e],i[e]=t}),i};var O=function(t){return E.isFunction(t)?t:function(e){return e[t]
}};E.sortBy=function(t,e,n){var i=O(e);return E.pluck(E.map(t,function(t,e,r){return{value:t,index:e,criteria:i.call(n,t,e,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index<e.index?-1:1}),"value")};var j=function(t,e,n,i){var r={},o=O(e||E.identity);return C(t,function(e,s){var a=o.call(n,e,s,t);i(r,a,e)}),r};E.groupBy=function(t,e,n){return j(t,e,n,function(t,e,n){(E.has(t,e)?t[e]:t[e]=[]).push(n)})},E.countBy=function(t,e,n){return j(t,e,n,function(t,e){E.has(t,e)||(t[e]=0),t[e]++})},E.sortedIndex=function(t,e,n,i){n=null==n?E.identity:O(n);for(var r=n.call(i,e),o=0,s=t.length;s>o;){var a=o+s>>>1;n.call(i,t[a])<r?o=a+1:s=a}return o},E.toArray=function(t){return t?E.isArray(t)?a.call(t):t.length===+t.length?E.map(t,E.identity):E.values(t):[]},E.size=function(t){return null==t?0:t.length===+t.length?t.length:E.keys(t).length},E.first=E.head=E.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:a.call(t,0,e)},E.initial=function(t,e,n){return a.call(t,0,t.length-(null==e||n?1:e))},E.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},E.rest=E.tail=E.drop=function(t,e,n){return a.call(t,null==e||n?1:e)},E.compact=function(t){return E.filter(t,E.identity)};var S=function(t,e,n){return C(t,function(t){E.isArray(t)?e?s.apply(n,t):S(t,e,n):n.push(t)}),n};E.flatten=function(t,e){return S(t,e,[])},E.without=function(t){return E.difference(t,a.call(arguments,1))},E.uniq=E.unique=function(t,e,n,i){E.isFunction(e)&&(i=n,n=e,e=!1);var r=n?E.map(t,n,i):t,o=[],s=[];return C(r,function(n,i){(e?i&&s[s.length-1]===n:E.contains(s,n))||(s.push(n),o.push(t[i]))}),o},E.union=function(){return E.uniq(l.apply(i,arguments))},E.intersection=function(t){var e=a.call(arguments,1);return E.filter(E.uniq(t),function(t){return E.every(e,function(e){return E.indexOf(e,t)>=0})})},E.difference=function(t){var e=l.apply(i,a.call(arguments,1));return E.filter(t,function(t){return!E.contains(e,t)})},E.zip=function(){for(var t=a.call(arguments),e=E.max(E.pluck(t,"length")),n=new Array(e),i=0;e>i;i++)n[i]=E.pluck(t,""+i);return n},E.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},E.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=E.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}if(y&&t.indexOf===y)return t.indexOf(e,n);for(;r>i;i++)if(t[i]===e)return i;return-1},E.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(_&&t.lastIndexOf===_)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var r=i?n:t.length;r--;)if(t[r]===e)return r;return-1},E.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=0,o=new Array(i);i>r;)o[r++]=t,t+=n;return o},E.bind=function(t,e){if(t.bind===x&&x)return x.apply(t,a.call(arguments,1));var n=a.call(arguments,2);return function(){return t.apply(e,n.concat(a.call(arguments)))}},E.partial=function(t){var e=a.call(arguments,1);return function(){return t.apply(this,e.concat(a.call(arguments)))}},E.bindAll=function(t){var e=a.call(arguments,1);return 0===e.length&&(e=E.functions(t)),C(e,function(e){t[e]=E.bind(t[e],t)}),t},E.memoize=function(t,e){var n={};return e||(e=E.identity),function(){var i=e.apply(this,arguments);return E.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},E.delay=function(t,e){var n=a.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},E.defer=function(t){return E.delay.apply(E,[t,1].concat(a.call(arguments,1)))},E.throttle=function(t,e){var n,i,r,o,s=0,a=function(){s=new Date,r=null,o=t.apply(n,i)};return function(){var l=new Date,u=e-(l-s);return n=this,i=arguments,0>=u?(clearTimeout(r),r=null,s=l,o=t.apply(n,i)):r||(r=setTimeout(a,u)),o}},E.debounce=function(t,e,n){var i,r;return function(){var o=this,s=arguments,a=function(){i=null,n||(r=t.apply(o,s))},l=n&&!i;return clearTimeout(i),i=setTimeout(a,e),l&&(r=t.apply(o,s)),r}},E.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},E.wrap=function(t,e){return function(){var n=[t];return s.apply(n,arguments),e.apply(this,n)}},E.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},E.after=function(t,e){return 0>=t?e():function(){return--t<1?e.apply(this,arguments):void 0}},E.keys=w||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)E.has(t,n)&&(e[e.length]=n);return e},E.values=function(t){var e=[];for(var n in t)E.has(t,n)&&e.push(t[n]);return e},E.pairs=function(t){var e=[];for(var n in t)E.has(t,n)&&e.push([n,t[n]]);return e},E.invert=function(t){var e={};for(var n in t)E.has(t,n)&&(e[t[n]]=n);return e},E.functions=E.methods=function(t){var e=[];for(var n in t)E.isFunction(t[n])&&e.push(n);return e.sort()},E.extend=function(t){return C(a.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},E.pick=function(t){var e={},n=l.apply(i,a.call(arguments,1));return C(n,function(n){n in t&&(e[n]=t[n])}),e},E.omit=function(t){var e={},n=l.apply(i,a.call(arguments,1));for(var r in t)E.contains(n,r)||(e[r]=t[r]);return e},E.defaults=function(t){return C(a.call(arguments,1),function(e){if(e)for(var n in e)null==t[n]&&(t[n]=e[n])}),t},E.clone=function(t){return E.isObject(t)?E.isArray(t)?t.slice():E.extend({},t):t},E.tap=function(t,e){return e(t),t};var H=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof E&&(t=t._wrapped),e instanceof E&&(e=e._wrapped);var r=u.call(t);if(r!=u.call(e))return!1;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return i[o]==e;n.push(t),i.push(e);var s=0,a=!0;if("[object Array]"==r){if(s=t.length,a=s==e.length)for(;s--&&(a=H(t[s],e[s],n,i)););}else{var l=t.constructor,c=e.constructor;if(l!==c&&!(E.isFunction(l)&&l instanceof l&&E.isFunction(c)&&c instanceof c))return!1;for(var h in t)if(E.has(t,h)&&(s++,!(a=E.has(e,h)&&H(t[h],e[h],n,i))))break;if(a){for(h in e)if(E.has(e,h)&&!s--)break;a=!s}}return n.pop(),i.pop(),a};E.isEqual=function(t,e){return H(t,e,[],[])},E.isEmpty=function(t){if(null==t)return!0;if(E.isArray(t)||E.isString(t))return 0===t.length;for(var e in t)if(E.has(t,e))return!1;return!0},E.isElement=function(t){return!(!t||1!==t.nodeType)},E.isArray=b||function(t){return"[object Array]"==u.call(t)},E.isObject=function(t){return t===Object(t)},C(["Arguments","Function","String","Number","Date","RegExp"],function(t){E["is"+t]=function(e){return u.call(e)=="[object "+t+"]"}}),E.isArguments(arguments)||(E.isArguments=function(t){return!(!t||!E.has(t,"callee"))}),"function"!=typeof/./&&(E.isFunction=function(t){return"function"==typeof t}),E.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},E.isNaN=function(t){return E.isNumber(t)&&t!=+t},E.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==u.call(t)},E.isNull=function(t){return null===t},E.isUndefined=function(t){return void 0===t},E.has=function(t,e){return c.call(t,e)},E.noConflict=function(){return t._=e,this},E.identity=function(t){return t},E.times=function(t,e,n){for(var i=Array(t),r=0;t>r;r++)i[r]=e.call(n,r);return i},E.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var V={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};V.unescape=E.invert(V.escape);var N={escape:new RegExp("["+E.keys(V.escape).join("")+"]","g"),unescape:new RegExp("("+E.keys(V.unescape).join("|")+")","g")};E.each(["escape","unescape"],function(t){E[t]=function(e){return null==e?"":(""+e).replace(N[t],function(e){return V[t][e]})}}),E.result=function(t,e){if(null==t)return null;var n=t[e];return E.isFunction(n)?n.call(t):n},E.mixin=function(t){C(E.functions(t),function(e){var n=E[e]=t[e];E.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),F.call(this,n.apply(E,t))}})};var $=0;E.uniqueId=function(t){var e=++$+"";return t?t+e:e},E.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var A=/(.)^/,I={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},M=/\\|'|\r|\n|\t|\u2028|\u2029/g;E.template=function(t,e,n){var i;n=E.defaults({},n,E.templateSettings);var r=new RegExp([(n.escape||A).source,(n.interpolate||A).source,(n.evaluate||A).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(r,function(e,n,i,r,a){return s+=t.slice(o,a).replace(M,function(t){return"\\"+I[t]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(s+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(s+="';\n"+r+"\n__p+='"),o=a+e.length,e}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{i=new Function(n.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(e)return i(e,E);var l=function(t){return i.call(this,t,E)};return l.source="function("+(n.variable||"obj")+"){\n"+s+"}",l},E.chain=function(t){return E(t).chain()};var F=function(t){return this._chain?E(t).chain():t};E.mixin(E),C(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];E.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],F.call(this,n)}}),C(["concat","join","slice"],function(t){var e=i[t];E.prototype[t]=function(){return F.call(this,e.apply(this._wrapped,arguments))}}),E.extend(E.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(t){return function(){var e;return e||t._}}(this)),function(){var t,e=this,n=e.Backbone,i=[],r=i.push,o=i.slice,s=i.splice;t="undefined"!=typeof exports?exports:e.Backbone={},t.VERSION="1.0.0";var a=e._;a||"undefined"==typeof require||(a=require("underscore")),t.$=e.jQuery||e.Zepto||e.ender||e.$,t.noConflict=function(){return e.Backbone=n,this},t.emulateHTTP=!1,t.emulateJSON=!1;var l=t.Events={on:function(t,e,n){if(!c(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!c(this,"once",t,[e,n])||!e)return this;var i=this,r=a.once(function(){i.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var i,r,o,s,l,u,h,f;if(!this._events||!c(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(s=t?[t]:a.keys(this._events),l=0,u=s.length;u>l;l++)if(t=s[l],o=this._events[t]){if(this._events[t]=i=[],e||n)for(h=0,f=o.length;f>h;h++)r=o[h],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!c(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&h(n,e),i&&h(i,arguments),this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var r=!e&&!n;"object"==typeof e&&(n=this),t&&((i={})[t._listenerId]=t);for(var o in i)i[o].off(e,n,this),r&&delete this._listeners[o];return this}},u=/\s+/,c=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(u.test(n)){for(var o=n.split(u),s=0,a=o.length;a>s;s++)t[e].apply(t,[o[s]].concat(i));return!1}return!0},h=function(t,e){var n,i=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e)}},f={listenTo:"on",listenToOnce:"once"};a.each(f,function(t,e){l[e]=function(e,n,i){var r=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=a.uniqueId("l"));return r[o]=e,"object"==typeof n&&(i=this),e[t](n,i,this),this}}),l.bind=l.on,l.unbind=l.off,a.extend(t,l);var d=t.Model=function(t,e){var n,i=t||{};e||(e={}),this.cid=a.uniqueId("c"),this.attributes={},a.extend(this,a.pick(e,p)),e.parse&&(i=this.parse(i,e)||{}),(n=a.result(this,"defaults"))&&(i=a.defaults({},i,n)),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)},p=["url","urlRoot","collection"];a.extend(d.prototype,l,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return a.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return a.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var i,r,o,s,l,u,c,h;if(null==t)return this;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;o=n.unset,l=n.silent,s=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=a.clone(this.attributes),this.changed={}),h=this.attributes,c=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(i in r)e=r[i],a.isEqual(h[i],e)||s.push(i),a.isEqual(c[i],e)?delete this.changed[i]:this.changed[i]=e,o?delete h[i]:h[i]=e;if(!l){s.length&&(this._pending=!0);for(var f=0,d=s.length;d>f;f++)this.trigger("change:"+s[f],this,h[s[f]],n)}if(u)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,a.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,a.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!a.isEmpty(this.changed):a.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?a.clone(this.changed):!1;var e,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var r in t)a.isEqual(i[r],e=t[r])||((n||(n={}))[r]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return a.clone(this._previousAttributes)},fetch:function(t){t=t?a.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return e.set(e.parse(i,t),t)?(n&&n(e,i,t),void e.trigger("sync",e,i,t)):!1},F(this,t),this.sync("read",this,t)},save:function(t,e,n){var i,r,o,s=this.attributes;if(null==t||"object"==typeof t?(i=t,n=e):(i={})[t]=e,!(!i||n&&n.wait||this.set(i,n)))return!1;if(n=a.extend({validate:!0},n),!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=a.extend({},s,i)),void 0===n.parse&&(n.parse=!0);var l=this,u=n.success;return n.success=function(t){l.attributes=s;var e=l.parse(t,n);return n.wait&&(e=a.extend(i||{},e)),a.isObject(e)&&!l.set(e,n)?!1:(u&&u(l,t,n),void l.trigger("sync",l,t,n))},F(this,n),r=this.isNew()?"create":n.patch?"patch":"update","patch"===r&&(n.attrs=i),o=this.sync(r,this,n),i&&n.wait&&(this.attributes=s),o},destroy:function(t){t=t?a.clone(t):{};var e=this,n=t.success,i=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(r){(t.wait||e.isNew())&&i(),n&&n(e,r,t),e.isNew()||e.trigger("sync",e,r,t)},this.isNew())return t.success(),!1;F(this,t);var r=this.sync("delete",this,t);return t.wait||i(),r},url:function(){var t=a.result(this,"urlRoot")||a.result(this.collection,"url")||M();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},a.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=a.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,a.extend(e||{},{validationError:n})),!1):!0}});var m=["keys","values","pairs","invert","pick","omit"];a.each(m,function(t){d.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.attributes),a[t].apply(a,e)}});var g=t.Collection=function(t,e){e||(e={}),e.url&&(this.url=e.url),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,a.extend({silent:!0},e))},v={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};a.extend(g.prototype,l,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return t.sync.apply(this,arguments)},add:function(t,e){return this.set(t,a.defaults(e||{},y))},remove:function(t,e){t=a.isArray(t)?t.slice():[t],e||(e={});var n,i,r,o;for(n=0,i=t.length;i>n;n++)o=this.get(t[n]),o&&(delete this._byId[o.id],delete this._byId[o.cid],r=this.indexOf(o),this.models.splice(r,1),this.length--,e.silent||(e.index=r,o.trigger("remove",o,this,e)),this._removeReference(o));return this},set:function(t,e){e=a.defaults(e||{},v),e.parse&&(t=this.parse(t,e)),a.isArray(t)||(t=t?[t]:[]);var n,i,o,l,u,c=e.at,h=this.comparator&&null==c&&e.sort!==!1,f=a.isString(this.comparator)?this.comparator:null,d=[],p=[],m={};for(n=0,i=t.length;i>n;n++)(o=this._prepareModel(t[n],e))&&((l=this.get(o))?(e.remove&&(m[l.cid]=!0),e.merge&&(l.set(o.attributes,e),h&&!u&&l.hasChanged(f)&&(u=!0))):e.add&&(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)));if(e.remove){for(n=0,i=this.length;i>n;++n)m[(o=this.models[n]).cid]||p.push(o);p.length&&this.remove(p,e)}if(d.length&&(h&&(u=!0),this.length+=d.length,null!=c?s.apply(this.models,[c,0].concat(d)):r.apply(this.models,d)),u&&this.sort({silent:!0}),e.silent)return this;for(n=0,i=d.length;i>n;n++)(o=d[n]).trigger("add",o,this,e);return u&&this.trigger("sort",this,e),this},reset:function(t,e){e||(e={});for(var n=0,i=this.models.length;i>n;n++)this._removeReference(this.models[n]);return e.previousModels=this.models,this._reset(),this.add(t,a.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,a.extend({at:this.length},e)),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,a.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(t,e){return this.models.slice(t,e)},get:function(t){return null==t?void 0:this._byId[null!=t.id?t.id:t.cid||t]},at:function(t){return this.models[t]},where:function(t,e){return a.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),a.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(a.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},sortedIndex:function(t,e,n){e||(e=this.comparator);var i=a.isFunction(e)?e:function(t){return t.get(e)};return a.sortedIndex(this.models,t,i,n)},pluck:function(t){return a.invoke(this.models,"get",t)},fetch:function(t){t=t?a.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var r=t.reset?"reset":"set";n[r](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},F(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?a.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,i=e.success;return e.success=function(r){e.wait&&n.add(t,e),i&&i(t,r,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t.collection||(t.collection=this),t;e||(e={}),e.collection=this;var n=new this.model(t,e);return n._validate(t,e)?n:(this.trigger("invalid",this,t,e),!1)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var _=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];a.each(_,function(t){g.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.models),a[t].apply(a,e)}});var b=["groupBy","countBy","sortBy"];a.each(b,function(t){g.prototype[t]=function(e,n){var i=a.isFunction(e)?e:function(t){return t.get(e)};return a[t](this.models,i,n)}});var w=t.View=function(t){this.cid=a.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},x=/^(\S+)\s*(.*)$/,E=["model","collection","el","id","attributes","className","tagName","events"];a.extend(w.prototype,l,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=a.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(a.isFunction(n)||(n=this[t[e]]),n){var i=e.match(x),r=i[1],o=i[2];n=a.bind(n,this),r+=".delegateEvents"+this.cid,""===o?this.$el.on(r,n):this.$el.on(r,o,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(t){this.options&&(t=a.extend({},a.result(this,"options"),t)),a.extend(this,a.pick(t,E)),this.options=t},_ensureElement:function(){if(this.el)this.setElement(a.result(this,"el"),!1);else{var e=a.extend({},a.result(this,"attributes"));this.id&&(e.id=a.result(this,"id")),this.className&&(e["class"]=a.result(this,"className"));var n=t.$("<"+a.result(this,"tagName")+">").attr(e);this.setElement(n,!1)}}}),t.sync=function(e,n,i){var r=C[e];a.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:r,dataType:"json"};if(i.url||(o.url=a.result(n,"url")||M()),null!=i.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(o.contentType="application/json",o.data=JSON.stringify(i.attrs||n.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),i.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){o.type="POST",i.emulateJSON&&(o.data._method=r);var s=i.beforeSend;i.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",r),s?s.apply(this,arguments):void 0}}"GET"===o.type||i.emulateJSON||(o.processData=!1),"PATCH"!==o.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=i.xhr=t.ajax(a.extend(o,i));return n.trigger("request",n,l,i),l};var C={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var T=t.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,O=/(\(\?)?:\w+/g,j=/\*\w+/g,S=/[\-{}\[\]+?.,\\\^$|#\s]/g;a.extend(T.prototype,l,{initialize:function(){},route:function(e,n,i){a.isRegExp(e)||(e=this._routeToRegExp(e)),a.isFunction(n)&&(i=n,n=""),i||(i=this[n]);var r=this;return t.history.route(e,function(o){var s=r._extractParameters(e,o);i&&i.apply(r,s),r.trigger.apply(r,["route:"+n].concat(s)),r.trigger("route",n,s),t.history.trigger("route",r,n,s)}),this},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=a.result(this,"routes");for(var t,e=a.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(S,"\\$&").replace(k,"(?:$1)?").replace(O,function(t,e){return e?t:"([^/]+)"}).replace(j,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return a.map(n,function(t){return t?decodeURIComponent(t):null})}});var H=t.History=function(){this.handlers=[],a.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},V=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,$=/msie [\w.]+/,A=/\/$/;H.started=!1,a.extend(H.prototype,l,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var n=this.root.replace(A,"");t.indexOf(n)||(t=t.substr(n.length))}else t=this.getHash();return t.replace(V,"")},start:function(e){if(H.started)throw new Error("Backbone.history has already been started");H.started=!0,this.options=a.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),i=document.documentMode,r=$.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);this.root=("/"+this.root+"/").replace(N,"/"),r&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var o=this.location,s=o.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&s&&o.hash&&(this.fragment=this.getHash().replace(V,""),this.history.replaceState({},document.title,this.root+this.fragment+o.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),H.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(t){var e=this.fragment=this.getFragment(t),n=a.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0});return n},navigate:function(t,e){if(!H.started)return!1;if(e&&e!==!0||(e={trigger:e}),t=this.getFragment(t||""),this.fragment!==t){this.fragment=t;var n=this.root+t;if(this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}e.trigger&&this.loadUrl(t)}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),t.history=new H;var I=function(t,e){var n,i=this;n=t&&a.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},a.extend(n,i,e);var r=function(){this.constructor=n};return r.prototype=i.prototype,n.prototype=new r,t&&a.extend(n.prototype,t),n.__super__=i.prototype,n};d.extend=g.extend=T.extend=w.extend=H.extend=I;var M=function(){throw new Error('A "url" property or function must be specified')},F=function(t,e){var n=e.error;e.error=function(i){n&&n(t,i,e),t.trigger("error",t,i,e)}}}.call(this),define("backbone",["zepto","underscore"],function(t){return function(){var e;return e||t.Backbone}}(this));var Handlebars={};!function(t,e){t.VERSION="1.0.0",t.COMPILER_REVISION=4,t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},t.helpers={},t.partials={};var n=Object.prototype.toString,i="[object Function]",r="[object Object]";t.registerHelper=function(e,i,o){if(n.call(e)===r){if(o||i)throw new t.Exception("Arg not supported with multiple helpers");t.Utils.extend(this.helpers,e)}else o&&(i.not=o),this.helpers[e]=i},t.registerPartial=function(e,i){n.call(e)===r?t.Utils.extend(this.partials,e):this.partials[e]=i},t.registerHelper("helperMissing",function(t){if(2===arguments.length)return e;throw new Error("Missing helper: '"+t+"'")}),t.registerHelper("blockHelperMissing",function(e,r){var o=r.inverse||function(){},s=r.fn,a=n.call(e);return a===i&&(e=e.call(this)),e===!0?s(this):e===!1||null==e?o(this):"[object Array]"===a?e.length>0?t.helpers.each(e,r):o(this):s(e)}),t.K=function(){},t.createFrame=Object.create||function(e){t.K.prototype=e;var n=new t.K;return t.K.prototype=null,n},t.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(e,n){if(t.logger.level<=e){var i=t.logger.methodMap[e];"undefined"!=typeof console&&console[i]&&console[i].call(console,n)}}},t.log=function(e,n){t.logger.log(e,n)},t.registerHelper("each",function(e,r){var o,s=r.fn,a=r.inverse,l=0,u="",c=n.call(e);if(c===i&&(e=e.call(this)),r.data&&(o=t.createFrame(r.data)),e&&"object"==typeof e)if(e instanceof Array)for(var h=e.length;h>l;l++)o&&(o.index=l),u+=s(e[l],{data:o});else for(var f in e)e.hasOwnProperty(f)&&(o&&(o.key=f),u+=s(e[f],{data:o}),l++);return 0===l&&(u=a(this)),u}),t.registerHelper("if",function(e,r){var o=n.call(e);return o===i&&(e=e.call(this)),!e||t.Utils.isEmpty(e)?r.inverse(this):r.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn})}),t.registerHelper("with",function(e,r){var o=n.call(e);return o===i&&(e=e.call(this)),t.Utils.isEmpty(e)?void 0:r.fn(e)}),t.registerHelper("log",function(e,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(i,e)});var o=["description","fileName","lineNumber","message","name","number","stack"];t.Exception=function(){for(var t=Error.prototype.constructor.apply(this,arguments),e=0;e<o.length;e++)this[o[e]]=t[o[e]]},t.Exception.prototype=new Error,t.SafeString=function(t){this.string=t},t.SafeString.prototype.toString=function(){return this.string.toString()};var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},a=/[&<>"'`]/g,l=/[&<>"'`]/,u=function(t){return s[t]||"&amp;"};t.Utils={extend:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},escapeExpression:function(e){return e instanceof t.SafeString?e.toString():null==e||e===!1?"":(e=e.toString(),l.test(e)?e.replace(a,u):e)},isEmpty:function(t){return t||0===t?"[object Array]"===n.call(t)&&0===t.length?!0:!1:!0}},t.VM={template:function(e){var n={escapeExpression:t.Utils.escapeExpression,invokePartial:t.VM.invokePartial,programs:[],program:function(e,n,i){var r=this.programs[e];
return i?r=t.VM.program(e,n,i):r||(r=this.programs[e]=t.VM.program(e,n)),r},merge:function(e,n){var i=e||n;return e&&n&&(i={},t.Utils.extend(i,n),t.Utils.extend(i,e)),i},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(i,r){r=r||{};var o=e.call(n,t,i,r.helpers,r.partials,r.data),s=n.compilerInfo||[],a=s[0]||1,l=t.COMPILER_REVISION;if(a!==l){if(l>a){var u=t.REVISION_CHANGES[l],c=t.REVISION_CHANGES[a];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+u+") or downgrade your runtime to an older version ("+c+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+s[1]+")."}return o}},programWithDepth:function(t,e,n){var i=Array.prototype.slice.call(arguments,3),r=function(t,r){return r=r||{},e.apply(this,[t,r.data||n].concat(i))};return r.program=t,r.depth=i.length,r},program:function(t,e,n){var i=function(t,i){return i=i||{},e(t,i.data||n)};return i.program=t,i.depth=0,i},noop:function(){return""},invokePartial:function(n,i,r,o,s,a){var l={helpers:o,partials:s,data:a};if(n===e)throw new t.Exception("The partial "+i+" could not be found");if(n instanceof Function)return n(r,l);if(t.compile)return s[i]=t.compile(n,{data:a!==e}),s[i](r,l);throw new t.Exception("The partial "+i+" could not be compiled when running in runtime-only mode")}},t.template=t.VM.template}(Handlebars),define("handlebars",function(t){return function(){var e;return e||t.Handlebars}}(this)),function(){function t(){this.helpers&&_.each(this.helpers,function(t,e){var n=this;this.helpers[e]=function(){var e=_.toArray(arguments),i=_.last(e);return i.context=this,t.apply(n,e)}},this)}function e(t){return'Error "'+t+'". For more information visit http://thoraxjs.org/error-codes.html#'+t}function n(t,e){var n=t.extend;t.extend=function(){var t=n.apply(this,arguments);return t.prototype.name&&(e[t.prototype.name]=t),t}}function i(t,e,n,i){var r,o=t[e];if(_.indexOf(n,".")>=0){var s=n.split(/\./);n=s.pop(),_.each(s,function(t){o=o[t]})}if(o&&(r=o[n]),r||i)return r;throw new Error(e+": "+n+" does not exist.")}function r(t,e){var n;if(_.isString(this[t])?n=se.Util.getViewClass(this[t],!0):this.name&&!_.isFunction(this[t])&&(n=se.Util.getViewClass(this.name+(e.extension||""),!0)),n&&!_.isFunction(this[t])&&(this[t]=n),e.required&&!_.isFunction(this[t]))throw new Error("View "+(this.name||this.cid)+" requires: "+t)}function o(t,e){var n;if(_.isString(this[t])?n=se.Util.getTemplate(this[t],!0):this.name&&!_.isFunction(this[t])&&(n=se.Util.getTemplate(this.name+(e.extension||""),!0)),!n&&"template"===t&&this._defaultTemplate&&(n=this._defaultTemplate),n&&!_.isFunction(this[t])&&(this[t]=n),e.required&&!_.isFunction(this[t]))throw new Error("View "+(this.name||this.cid)+" requires: "+t)}function s(t,e,n){return t&&t[e]?_.isFunction(t[e])?t[e].call(n||t):t[e]:null}function a(t){_.each(ae,function(e){t[e.name]||(t[e.name]=[])})}function l(t){_.each(ae,function(e){t[e.name]=[]})}function u(t,e,n,i){var r=[];_.has(t,e)&&r.push(t);var o=t;if(n)for(;o=o.__parent__;)_.has(o,e)&&r.push(o);else for(o=o.constructor;o;)o.prototype&&_.has(o.prototype,e)&&r.push(o.prototype),o=o.__super__&&o.__super__.constructor;for(var a=r.length;a--;)_.each(s(r[a],e,t),i)}function c(t,e,n,i){if(_.isObject(n)){var r=ae[e];if(r&&r.event)return t&&t.listenTo&&t[e]&&t[e].cid?f(t,n,i,e):f(t["_"+e+"Events"],n,i),!0}}function h(t,e,n,i,r){function o(){if(t.el)s.apply(r,arguments);else{if(a)throw new Error("destroyed-event:"+t.name+":"+n);a++}}var s=k(i,t),a=0;o._callback=s._callback||s,o._thoraxBind=!0,t.listenTo(e,n,o)}function f(t,e,n,i){function r(e,r){i?h(t,t[i],r,e,n||t):t.push([r,e,n])}_.each(e,function(t,e){_.isArray(t)?_.each(t,function(t){r(t,e)}):r(t,e)})}function d(t){if(!t||!t.data)throw new Error(e("handlebars-no-data"));return t.data}function p(t){t.tag&&(t.tagName=t.tag,delete t.tag),t["class"]&&(t.className=t["class"],delete t["class"])}function m(t){he.push.apply(he,t),ue=new RegExp("^(nested\\s+)?("+he.join("|")+")(?:\\s|$)")}function g(t,e){return function(n){var i=$(n.target).view({helper:!1});i&&i.cid===e&&(n.originalContext=this,t(n))}}function v(t,e){function n(){try{r.apply(o,arguments)}catch(e){se.onException("thorax-exception: "+(o.name||o.cid)+":"+t,e)}}t+=e.originalName;var i=e.handler,r=_.isFunction(i)?i:this[i];if(!r)throw new Error('Event "'+i+'" does not exist '+(this.name||this.cid)+":"+t);var o=e.context||this;return n._callback=r,n._thoraxBind=!0,n}function y(t,e,n){var i={originalName:t,handler:_.isString(e)?this[e]:e};if(t.match(ue)){var r=ce.exec(t);i.nested=!!r[1],i.name=r[2],i.type="DOM",i.selector=r[3]}else i.name=t,i.type="view";return i.context=n,i}function b(t){for(;t._helperName&&"view"!==t._helperName;)t=t.parent;return t}function w(t){var e=_.pick(t,"fn","inverse","hash","data");return e.data=_.omit(t.data,"cid","view","yield"),e}function x(t,e){function n(t,e){return _.every(t,function(t,n){return e[n]===t})}return t._helperName!==e._helperName?!1:(t=t._helperOptions,e=e._helperOptions,t.args.length===e.args.length&&n(t.args,e.args)&&_.isEqual(_.keys(t.options),_.keys(e.options))&&_.every(t.options,function(i,r){if("data"===r||"hash"===r)return n(t.options[r],e.options[r]);if("fn"===r||"inverse"===r){if(e.options[r]===i)return!0;var o=e.options[r]||{};return i&&_.has(i,"program")&&!i.depth&&o.program===i.program}return e.options[r]===i}))}function E(t,e){function n(n,i){var r=this[t],o=s(this,e.$el);return n===r?this:(r&&this.unbindDataObject(r),n?(this[t]=n,e.loading&&e.loading.call(this),this.bindDataObject(t,n,_.extend({},this.options,i)),o&&o.attr(e.cidAttrName,n.cid),n.trigger("set",n,r)):(this[t]=!1,e.change&&e.change.call(this,!1),o&&o.removeAttr(e.cidAttrName)),this.trigger("change:data-object",t,n,r),this)}e=ae[t]=_.defaults({name:"_"+t+"Events",event:!0},e),e.ctor=function(){if(this[t]){var n=this[t];this[t]=null,this[e.set](n)}},se.View.prototype[e.set]=n}function C(t,e,n){var i=this;u(n,"_"+t+"Events",!0,function(t){h(i,e,t[0],t[1],t[2]||i)})}function T(t,e){t.load?t.load(function(){e&&e.success&&e.success(t)},e):t.fetch(e)}function k(t,e){return _.isFunction(t)?t:e[t]}function O(t,e){if(!e||!e.serializing){var n=this.getObjectOptions(t)||{};this.conditionalRender(n.render)}}function j(t){var e=this.getObjectOptions(t)||void 0;this.shouldRender(e&&e.render)&&this.renderCollection&&this.renderCollection()}function S(t){var e=this.getObjectOptions(t)||void 0;this.shouldRender(e&&e.render)&&this.ensureRendered()}function H(){this.itemFilter&&this.collection.forEach(V,this)}function V(t){var e=this.getCollectionElement();this.itemFilter&&e.find("["+me+'="'+t.cid+'"]')[N.call(this,t)?"show":"hide"]()}function N(t){return this.itemFilter(t,this.collection.indexOf(t))}function A(){var t=this.getCollectionElement();this.emptyClass&&t.removeClass(this.emptyClass),t.removeAttr(be),t.empty()}function I(){var t=this.getCollectionElement();this.emptyClass&&t.addClass(this.emptyClass),t.attr(be,!0),this.appendEmpty()}function M(t,e){return _.each(t,function(n,i){return _.isObject(n)?M(n,e):void(e(n,i,t)===!1&&delete t[i])}),t}function F(){U.call(this),this.model&&this.model.previousAttributes&&this.model.set(this.model.previousAttributes(),{silent:!0})}function P(t,e,n){var i=0;$("select,input,textarea",e.root||t.el).each(function(){(e.children||t===$(this).view({helper:!1}))&&"button"!==this.type&&"cancel"!==this.type&&"submit"!==this.type&&this.name&&(n(this,i),++i)})}function R(t,e,n,i){for(var r,o=t,s=e.split("["),a=n.mode,l=0;l<s.length-1;++l){if(r=s[l].replace("]",""),!o[r]){if("serialize"!==a)return i(void 0,r);o[r]={}}o=o[r]}r=s[s.length-1].replace("]",""),i(o,r)}function U(){this.$("form").removeAttr("data-submit-wait")}function D(t){var e=t.getObjectOptions(t.model)||{};return e.populate===!0?{}:e.populate}function B(t,e){e=e||{},e.target=this,this.trigger(t,e),_.each(this.children,function(n){n.trigger(t,e)})}function L(){++this._renderCount,this.$el.attr(Ce,this.cid)}function q(){if(!this.$("["+Ce+'="'+this.cid+'"]')[0])throw new Error("No layout element found in "+(this.name||this.cid))}function z(){return this.$("["+Ce+'="'+this.cid+'"]')[0]||this.el[0]||this.el}function Z(t){return function(){var e=_.toArray(arguments);e.unshift(t),this.parent.trigger.apply(this.parent,e)}}function W(t){var e=b(this);if(!this[t]){var n=e[t];n&&(this[t]=n)}}function J(t){var e=$(this),n=e.view({helper:!1}),i=e.attr(ke),r=e.attr(Oe),o=!1;i&&(o=n[i].call(n,t)),r&&n.trigger(r,t),"A"===this.tagName&&o===!1&&t.preventDefault()}function Q(){X(),je=se._fastClickEventName||"click",$(document).on(je,Se,J)}function X(){je&&$(document).off(je,Se,J)}function G(t,e){function n(){r!==Backbone.history.getFragment()&&(o=!0,s.cancel(),e&&e())}function i(){Backbone.history.off("route",n),o||t.apply(this,arguments)}var r=Backbone.history.getFragment(),o=!1;Backbone.history.on("route",n);var s=_.bind(i,this);return s.cancel=function(){Backbone.history.off("route",n)},s}function K(t,e,n){if(this.isPopulated())return _.defer(t,this);2===arguments.length&&!_.isFunction(e)&&_.isObject(e)&&(n=e,e=!1);var i=this,r=!1,o=G(_.bind(t,i),function(){r=!0,i._request&&(i._aborted=!0,i._request.abort()),e&&e.call(i,!1)});this.fetch(_.defaults({success:o,error:function(){o.cancel(),!r&&e&&e.apply(i,[!0].concat(_.toArray(arguments)))}},n))}function Y(t,n){if(t.resetQueue)this.fetchQueue=void 0;else if(this.fetchQueue){var i=(this.fetchQueue[0]||{}).reset;if(i!==t.reset)throw new Error(e("mixed-fetch"))}return this.fetchQueue?void this.fetchQueue.push(t):(this.fetchQueue=[t],t=_.defaults({success:te(this,this.fetchQueue,"success"),error:te(this,this.fetchQueue,"error"),complete:te(this,this.fetchQueue,"complete")},t),n&&n.call(this,t),t)}function te(t,e,n){return function(){var i=arguments;_.each(e,function(t){t[n]&&t[n].apply(this,i)},this),t.fetchQueue===e&&(t.fetchQueue=void 0)}}function ee(){this.render()}$.fn.forEach||($.fn.forEach=function(t,e){$.fn.each.call(this,function(n){t.call(e||this,this,n)})});var ne="data-view-name",ie="data-view-cid",re="data-view-helper",oe={};Handlebars.templates||(Handlebars.templates={});var se=this.Thorax={templatePathPrefix:"",Views:{},onException:function(t,e){throw e},templates:Handlebars.templates};se.View=Backbone.View.extend({constructor:function(){var t=Backbone.View.apply(this,arguments);return _.each(ae,function(e){e.ctor&&e.ctor.call(this,t)},this),t},_configure:function(e){var n=this;this._referenceCount=0,this._objectOptionsByCid={},this._boundDataObjectsByCid={},_.each(ae,function(t){n[t.name]=[]}),oe[this.cid]=this,this.children={},this._renderCount=0,_.extend(this,e||{}),t.call(this),_.each(ae,function(t){t.configure&&t.configure.call(this)},this),this.trigger("configure")},setElement:function(){var t=Backbone.View.prototype.setElement.apply(this,arguments);return this.name&&this.$el.attr(ne,this.name),this.$el.attr(ie,this.cid),t},_addChild:function(t){return this.children[t.cid]?t:(t.retain(),this.children[t.cid]=t,t.parent&&t.parent!==this&&!t._helperOptions&&t.parent._removeChild(t),t.parent=this,this.trigger("child",t),t)},_removeChild:function(t){return delete this.children[t.cid],t.parent=null,t.release(),t},_destroy:function(){_.each(this._boundDataObjectsByCid,this.unbindDataObject,this),this.trigger("destroyed"),delete oe[this.cid],_.each(this.children,function(t){this._removeChild(t)},this),this.el&&(this.undelegateEvents(),this.remove(),this.off()),this.el=this.$el=void 0,this.parent=void 0,this.model=this.collection=this._collection=void 0,this._helperOptions=void 0},render:function(t){if(this.el){if(this._rendering)throw new Error(e("nested-render"));this._previousHelpers=_.filter(this.children,function(t){return t._helperOptions});var n={};_.each(this.children,function(t,e){t._helperOptions||(n[e]=t)}),this.children=n,this.trigger("before:rendered"),this._rendering=!0;try{!_.isUndefined(t)&&(_.isElement(t)||se.Util.is$(t)||t&&t.el||_.isString(t)||_.isFunction(t))?_.isFunction(t)&&(t=this.renderTemplate(t)):(o.call(this,"template",{required:!0}),t=this.renderTemplate(this.template)),_.each(this._previousHelpers,function(t){this._removeChild(t)},this),this._previousHelpers=void 0,this.html(t&&t.el||t&&t.string||t),++this._renderCount,this.trigger("rendered")}finally{this._rendering=!1}return t}},context:function(){return _.extend({},this.model&&this.model.attributes||{})},_getContext:function(){return _.extend({},this,s(this,"context")||{})},_getData:function(t){return{view:this,cid:_.uniqueId("t"),"yield":function(){return t.fn&&t.fn(t)}}},renderTemplate:function(t,e,n){var i;return e=e||this._getContext(),i=_.isFunction(t)?t:se.Util.getTemplate(t,n),i?i(e,{helpers:this.helpers,data:this._getData(e)}):""},ensureRendered:function(){!this._renderCount&&this.render()},shouldRender:function(t){return t||null==t&&this._renderCount},conditionalRender:function(t){this.shouldRender(t)&&this.render()},appendTo:function(t){this.ensureRendered(),$(t).append(this.el),this.trigger("ready",{target:this})},html:function(t){if(_.isUndefined(t))return this.el.innerHTML;this.trigger("before:append");var e=this._replaceHTML(t);return this.trigger("append"),e},release:function(){--this._referenceCount,this._referenceCount<=0&&this._destroy()},retain:function(t){++this._referenceCount,t&&this.listenTo(t,"destroyed",t.release)},_replaceHTML:function(t){return this.el.innerHTML="",this.$el.append(t)},_anchorClick:function(t){var e=$(t.currentTarget),n=e.attr("href");return n&&("#"===n[0]||"/"===n[0]&&"/"!==n[1])?(Backbone.history.navigate(n,{trigger:!0}),!1):!0}}),se.View.extend=function(){a(this);var t=Backbone.View.extend.apply(this,arguments);return t.__parent__=this,l(t),t},n(se.View,se.Views),$.fn.view=function(t){t=_.defaults(t||{},{helper:!0});var e="["+ie+"]";t.helper||(e+=":not(["+re+"])");var n=$(this).closest(e);return n&&oe[n.attr(ie)]||!1};var ae={};se.Util={getViewInstance:function(t,e){var n=se.Util.getViewClass(t,!0);return n?new n(e||{}):t},getViewClass:function(t,e){return _.isString(t)?i(se,"Views",t,e):_.isFunction(t)?t:!1},getTemplate:function(t,e){var n,i=se.templatePathPrefix;if(i&&t.substr(0,i.length)!==i&&(t=i+t),t=t.replace(/\.handlebars$/,""),n=Handlebars.templates[t],n||(t+=".handlebars",n=Handlebars.templates[t]),!n&&!e)throw new Error("templates: "+t+" does not exist.");return n},is$:function(t){return _.isObject(t)&&"length"in t},expandToken:function(t,e){function n(t,e){if(t.match(/^("|')/)&&t.match(/("|')$/))return t.replace(/(^("|')|('|")$)/g,"");for(var n=t.split("."),i=n.length,r=0;e&&i>r;r++)"this"!==n[r]&&(e=e[n[r]]);return e}if(t&&t.indexOf&&t.indexOf("{{")>=0){for(var i,r=/(?:\{?[^{]+)|(?:\{\{([^}]+)\}\})/g,o=[];i=r.exec(t);)if(i[1]){var s=i[1].split(/\s+/);if(s.length>1){var a=s.shift();s=_.map(s,function(t){return n(t,e)}),o.push(Handlebars.helpers[a]?Handlebars.helpers[a].apply(e,s):i[0])}else o.push(n(s[0],e))}else o.push(i[0]);t=o.join("")}return t},tag:function(t,e,n){var i=_.omit(t,"tagName"),r=t.tagName||"div";return"<"+r+" "+_.map(i,function(t,e){if(_.isUndefined(t)||"expand-tokens"===e)return"";var i=t;return n&&(i=se.Util.expandToken(t,n)),("className"===e?"class":e)+'="'+Handlebars.Utils.escapeExpression(i)+'"'}).join(" ")+">"+(_.isUndefined(e)?"":e)+"</"+r+">"}},se.Mixins={},_.extend(se.View,{mixin:function(t){se.Mixins[t](this)},registerMixin:function(t,e,n){se.Mixins[t]=function(t){var i=!!t.cid;n&&_.extend(i?t:t.prototype,n),i?e.call(t):t.on("configure",e)}}}),se.View.prototype.mixin=function(t){se.Mixins[t](this)};var le=se.View.prototype.on;ae.event={name:"_events",configure:function(){var t=this;u(this.constructor,"_events",!0,function(e){t.on.apply(t,e)}),u(this,"events",!1,function(e,n){t.on(n,e,t)})}},_.extend(se.View,{on:function(t,e){return a(this),c(this,t,e)?this:(_.isObject(t)?_.each(t,function(t,e){this.on(e,t)},this):_.isArray(e)?_.each(e,function(e){this._events.push([t,e])},this):this._events.push([t,e]),this)}}),_.extend(se.View.prototype,{on:function(t,e,n){return c(this,t,e,n)?this:(_.isObject(t)&&arguments.length<3?_.each(t,function(t,n){this.on(n,t,e||this)},this):_.each(_.isArray(e)?e:[e],function(e){var i=y.call(this,t,e,n||this);"DOM"!==i.type||this._eventsDelegated?this._addEvent(i):(this._eventsToDelegate||(this._eventsToDelegate=[]),this._eventsToDelegate.push(i))},this),this)},delegateEvents:function(t){this.undelegateEvents(),t&&(_.isFunction(t)&&(t=t.call(this)),this._eventsToDelegate=[],this.on(t)),this._eventsToDelegate&&_.each(this._eventsToDelegate,this._addEvent,this),this._eventsDelegated=!0},_addEvent:function(t){if(t.handler._thoraxBind)return le.call(this,t.name,t.handler,t.context||this);var e=v.call(this,t.type+"-event:",t);if("view"===t.type)t.context&&t.context!==this&&t.context instanceof se.View?h(t.context,this,t.name,e,t.context):le.call(this,t.name,e,t.context||this);else{t.nested||(e=g(e,this.cid));var n=t.name+".delegateEvents"+this.cid;t.selector?this.$el.on(n,t.selector,e):this.$el.on(n,e)}}}),se.View.prototype.bind=se.View.prototype.on,se.View.on("ready",function(t){function e(e){e._isReady||e.trigger("ready",t)}this._isReady||(this._isReady=!0,_.each(this.children,e),this.on("child",e))});var ue,ce=/^(nested\s+)?(\S+)(?:\s+(.+))?/,he=[];m(["mousedown","mouseup","mousemove","mouseover","mouseout","touchstart","touchend","touchmove","click","dblclick","keyup","keydown","keypress","submit","change","focus","blur"]);var fe="data-view-tmp",de={},pe={_ensureElement:function(){se.View.prototype._ensureElement.apply(this,arguments),this.$el.attr(re,this._helperName)},_getContext:function(){return this.parent._getContext.apply(this.parent,arguments)}};se.HelperView=se.View.extend(pe),Handlebars.registerViewHelper=function(t,e,n){2===arguments.length&&(e.factory?n=e.callback:(n=e,e=se.HelperView));var i=e.attributeWhiteList;Handlebars.registerHelper(t,function(){var r=_.toArray(arguments),o=r.pop(),s=d(o).view,a=o.hash["expand-tokens"];a&&(delete o.hash["expand-tokens"],_.each(o.hash,function(t,e){o.hash[e]=se.Util.expandToken(t,this)},this));var l={inverse:o.inverse,options:o.hash,declaringView:s,parent:b(s),_helperName:t,_helperOptions:{options:w(o),args:_.clone(r)}};p(o.hash);var u=_.clone(o.hash);i&&_.each(i,function(t,e){delete u[e],_.isUndefined(o.hash[e])||(l[t]=o.hash[e])}),u.tagName&&(l.tagName=u.tagName),l.attributes=function(){var t=e.prototype&&e.prototype.attributes||{};return _.isFunction(t)&&(t=t.apply(this,arguments)),_.extend(t,_.omit(u,["tagName"])),t.className&&(t["class"]=t.className,delete t.className),t},o.fn?l.template=o.fn:e&&e.prototype&&!e.prototype.template&&(l.template=Handlebars.VM.noop);var c=_.find(s._previousHelpers,function(t){return x(l,t)});if(c)s._previousHelpers=_.without(s._previousHelpers,c),s.children[c.cid]=c;else{if(e.factory){if(c=e.factory(r,l),!c)return"";c._helperName=l._helperName,c._helperOptions=l._helperOptions}else c=new e(l);s._previousHelpers=_.without(s._previousHelpers,c),r.push(c),s._addChild(c),s.trigger.apply(s,["helper",t].concat(r)),s.trigger.apply(s,["helper:"+t].concat(r)),n&&n.apply(this,r)}return u[fe]=c.cid,e.modifyHTMLAttributes&&e.modifyHTMLAttributes(u,c),new Handlebars.SafeString(se.Util.tag(u,"",a?this:null))});var r=Handlebars.helpers[t];return r},se.View.on("append",function(t,e){(t||this.$el).find("["+fe+"]").forEach(function(t){var n=t.getAttribute(fe),i=this.children[n];i&&(de[n]?(i.render(de[n]),delete de[n]):i.ensureRendered(),$(t).replaceWith(i.el),e&&e(i.el))},this)}),_.extend(se.View.prototype,{getObjectOptions:function(t){return t&&this._objectOptionsByCid[t.cid]},bindDataObject:function(t,e,n){if(this._boundDataObjectsByCid[e.cid])return!1;this._boundDataObjectsByCid[e.cid]=e;var n=this._modifyDataObjectOptions(e,_.extend({},ae[t].defaultOptions,n));this._objectOptionsByCid[e.cid]=n,C.call(this,t,e,this.constructor),C.call(this,t,e,this);var i=ae[t];return i.bindCallback&&i.bindCallback.call(this,e,n),e.shouldFetch&&e.shouldFetch(n)?T(e,n):ae[t].change&&ae[t].change.call(this,e,n),!0},unbindDataObject:function(t){return this._boundDataObjectsByCid[t.cid]?(delete this._boundDataObjectsByCid[t.cid],this.stopListening(t),delete this._objectOptionsByCid[t.cid],!0):!1},_modifyDataObjectOptions:function(t,e){return e}});var me="data-model-cid";se.Model=Backbone.Model.extend({isEmpty:function(){return!this.isPopulated()},isPopulated:function(){var t=_.clone(this.attributes),e=s(this,"defaults")||{};for(var n in e){if(t[n]!=e[n])return!0;delete t[n]}var i=_.keys(t);return i.length>1||1===i.length&&i[0]!==this.idAttribute},shouldFetch:function(t){var e;try{e=s(this,"url")}catch(n){e=!1}return t.fetch&&!!e&&!this.isPopulated()}}),se.Models={},n(se.Model,se.Models),E("model",{set:"setModel",defaultOptions:{render:void 0,fetch:!0,success:!1,invalid:!0},change:O,$el:"$el",cidAttrName:me}),se.View.on({model:{invalid:function(t,e){this.getObjectOptions(t).invalid&&this.trigger("invalid",e,t)},error:function(t,e){this.trigger("error",e,t)},change:function(t,e){ae.model.change.call(this,t,e)}}}),$.fn.model=function(t){var e=$(this),n=e.closest("["+me+"]"),i=n&&n.attr(me);if(i){var t=t||e.view();if(t&&t.model&&t.model.cid===i)return t.model||!1;var r=e.collection(t);if(r)return r.get(i)}return!1};var ge=Backbone.Collection.prototype.fetch,ve=Backbone.Collection.prototype.set,ye=se.View.prototype._replaceHTML,_e="data-collection-cid",be="data-collection-empty",we="data-collection-element",xe=1;se.Collection=Backbone.Collection.extend({model:se.Model||Backbone.Model,initialize:function(){return this.cid=_.uniqueId("collection"),Backbone.Collection.prototype.initialize.apply(this,arguments)},isEmpty:function(){return this.length>0?!1:0===this.length&&this.isPopulated()},isPopulated:function(){return this._fetched||this.length>0||!this.length&&!s(this,"url")},shouldFetch:function(t){return t.fetch&&!!s(this,"url")&&!this.isPopulated()},fetch:function(t){t=t||{};var e=t.success;return t.success=function(t,n){t._fetched=!0,e&&e(t,n)},ge.apply(this,arguments)},set:function(t,e){return this._fetched=!!t,ve.call(this,t,e)}}),_.extend(se.View.prototype,{getCollectionViews:function(t){return _.filter(this.children,function(e){return e instanceof se.CollectionView?!t||e.collection===t:!1})},updateFilter:function(t){_.invoke(this.getCollectionViews(t),"updateFilter")}}),se.Collections={},n(se.Collection,se.Collections),E("collection",{set:"setCollection",bindCallback:S,defaultOptions:{render:void 0,fetch:!0,success:!1,invalid:!0,change:!0},change:j,$el:"getCollectionElement",cidAttrName:_e}),se.CollectionView=se.View.extend({_defaultTemplate:Handlebars.VM.noop,_collectionSelector:"["+we+"]",_replaceHTML:function(t){if(!(this.collection&&this.getObjectOptions(this.collection)&&this._renderCount))return ye.call(this,t);var e,n=this.getCollectionElement();e=ye.call(this,t),n.attr("data-view-cid")||this.getCollectionElement().replaceWith(n)},render:function(){var t=this.shouldRender();se.View.prototype.render.apply(this,arguments),t||this.renderCollection()},appendItem:function(t,e,n){if(t){var i,r=this.getCollectionElement();if(n=_.defaults(n||{},{filter:!0}),e&&e.el&&(e=r.children().indexOf(e.el)+1),t.el||_.isString(t)?(i=t,t=!1):(e=e||this.collection.indexOf(t)||0,i=this.renderItem(t,e)),i){i.cid&&(i.ensureRendered(),this._addChild(i)),_.isString(i)&&!i.match(/^\s*</m)&&(i="<div>"+i+"</div>");var o=i.$el||$($.trim(i)).filter(function(){return this.nodeType===xe});t&&o.attr(me,t.cid);var s=e>0?this.collection.at(e-1):!1;if(s){var a=r.children("["+me+'="'+s.cid+'"]').last();a.after(o)}else r.prepend(o);this.trigger("append",null,function(e){e.setAttribute(me,t.cid)}),n.silent||this.trigger("rendered:item",this,this.collection,t,o,e),n.filter&&V.call(this,t)}return i}},updateItem:function(t){var e=this.getCollectionElement(),n=e.find("["+me+'="'+t.cid+'"]');n.attr(ie)||(this.removeItem(n),this.appendItem(t))},removeItem:function(t){var e=t;if(t.cid){var n=this.getCollectionElement();e=n.find("["+me+'="'+t.cid+'"]')}if(!e.length)return!1;e.remove();var i=e.attr(ie),r=this.children[i];return r&&this._removeChild(r),!0},renderCollection:function(){this.collection?(this.collection.isEmpty()?I.call(this):(A.call(this),this.collection.forEach(function(t,e){this.appendItem(t,e)},this)),this.trigger("rendered:collection",this,this.collection)):I.call(this)},emptyClass:"empty",renderEmpty:function(){if(this.emptyView||r.call(this,"emptyView",{extension:"-empty"}),this.emptyTemplate||this.emptyView||o.call(this,"emptyTemplate",{extension:"-empty",required:!1}),this.emptyView){var t={};this.emptyTemplate&&(t.template=this.emptyTemplate);var e=se.Util.getViewInstance(this.emptyView,t);return e.ensureRendered(),e}return this.emptyTemplate&&this.renderTemplate(this.emptyTemplate)},renderItem:function(t,e){if(this.itemView||r.call(this,"itemView",{extension:"-item",required:!1}),this.itemTemplate||this.itemView||o.call(this,"itemTemplate",{extension:"-item",required:!this.itemView}),this.itemView){var n={model:t};return this.itemTemplate&&(n.template=this.itemTemplate),se.Util.getViewInstance(this.itemView,n)}return this.renderTemplate(this.itemTemplate,this.itemContext(t,e))},itemContext:function(t){return t.attributes},appendEmpty:function(){var t=this.getCollectionElement();t.empty();var e=this.renderEmpty();e&&this.appendItem(e,0,{silent:!0,filter:!1}),this.trigger("rendered:empty",this,this.collection)},getCollectionElement:function(){var t=this.$(this._collectionSelector);return 0===t.length?this.$el:t},updateFilter:function(){H.call(this)}}),se.CollectionView.on({collection:{reset:j,sort:j,change:function(t){var e=this.getObjectOptions(this.collection);e&&e.change&&this.updateItem(t),V.call(this,t)},add:function(t){var e=this.getCollectionElement();if(1===this.collection.length&&e.length&&A.call(this),e.length){var n=this.collection.indexOf(t);this.appendItem(t,n)}},remove:function(t){var e=this.getCollectionElement();this.removeItem(t),0===this.collection.length&&e.length&&I.call(this)}}}),se.View.on({collection:{invalid:function(t,e){this.getObjectOptions(t).invalid&&this.trigger("invalid",e,t)},error:function(t,e){this.trigger("error",e,t)}}}),$.fn.collection=function(t){if(t&&t.collection)return t.collection;var e=$(this),n=e.closest("["+_e+"]"),i=n&&n.attr(_e);return i&&(t=e.view())?t.collection:!1},ae.model.defaultOptions.populate=!0;var Ee=ae.model.change;ae.model.change=function(t,e){if(this._isChanging=!0,Ee.apply(this,arguments),this._isChanging=!1,!e||!e.serializing){var n=D(this);this._renderCount&&n&&this.populate(!n.context&&this.model.attributes,n)}},_.extend(se.View.prototype,{serialize:function(){for(var t,e,n,i=0;i<arguments.length;++i)_.isFunction(arguments[i])?t=arguments[i]:_.isObject(arguments[i])&&("stopPropagation"in arguments[i]&&"preventDefault"in arguments[i]?n=arguments[i]:e=arguments[i]);if(!n||this._preventDuplicateSubmission(n)){e=_.extend({set:!0,validate:!0,children:!0},e||{});var r=e.attributes||{},o=this,s=[];if(P(this,e,function(t){var n=o._getInputValue(t,e,s);_.isUndefined(n)||R(r,t.name,{mode:"serialize"},function(t,e){t[e]?_.isArray(t[e])?t[e].push(n):t[e]=[t[e],n]:t[e]=n})}),e._silent||this.trigger("serialize",r,e),e.validate){var a=this.validateInput(r);if(a&&a.length&&(s=s.concat(a)),this.trigger("validate",r,s,e),s.length)return void this.trigger("invalid",s)}return e.set&&this.model&&!this.model.set(r,{silent:e.silent,serializing:!0})?!1:(t&&t.call(this,r,_.bind(U,this)),r)}},_preventDuplicateSubmission:function(t,e){t.preventDefault();var n=$(t.target);return"form"!==(t.target.tagName||"").toLowerCase()&&(n=$(t.target).closest("form")),n.attr("data-submit-wait")?!1:(n.attr("data-submit-wait","true"),e&&e.call(this,t),!0)},populate:function(t,e){e=_.extend({children:!0},e||{});var n,t=t||this._getContext();P(this,e,function(e){R(t,e.name,{mode:"populate"},function(t,i){if(n=t&&t[i],!_.isUndefined(n)){var r="checkbox"===e.type||"radio"===e.type;r&&_.isBoolean(n)?e.checked=n:r?e.checked=n==e.value:e.value=n}})}),++this._populateCount,e._silent||this.trigger("populate",t)},validateInput:function(){},_getInputValue:function(t){if("checkbox"!==t.type&&"radio"!==t.type){if(t.multiple===!0){var e=[];return $("option",t).each(function(){this.selected&&e.push(this.value)}),e}return t.value}return t.checked?t.getAttribute("value")||!0:void 0},_populateCount:0}),se.View.on({"before:rendered":function(){if(this._renderCount&&(this.model&&this.model.cid)===this._formModelCid){var t=this.getObjectOptions(this.model);this.previousFormData=M(this.serialize(_.extend({set:!1,validate:!1,_silent:!0},t)),function(t){return""!==t&&null!=t})}},rendered:function(){var t=D(this);!t||this._isChanging||this._populateCount||this.populate(!t.context&&this.model.attributes,t),this.previousFormData&&this.populate(this.previousFormData,_.extend({_silent:!0},t)),this._formModelCid=this.model&&this.model.cid,this.previousFormData=null}}),se.View.on({invalid:F,error:F,deactivated:function(){this.$el&&U.call(this)}});var Ce="data-layout-cid";se.LayoutView=se.View.extend({_defaultTemplate:Handlebars.VM.noop,render:function(){var t=se.View.prototype.render.apply(this,arguments);return this.template===Handlebars.VM.noop?L.call(this):q.call(this),t},setView:function(t,e){e=_.extend({scroll:!0},e||{}),_.isString(t)&&(t=new(se.Util.registryGet(se,"Views",t,!1))),this.ensureRendered();var n,i,r,o=this._view;return t===o?!1:(this.trigger("change:view:start",t,o,e),i=_.bind(function(){o&&(o.$el&&o.$el.remove(),B.call(o,"deactivated",e),this._removeChild(o))},this),n=_.bind(function(){if(t){t.ensureRendered(),B.call(this,"activated",e),t.trigger("activated",e),this._view=t;var n=z.call(this);this._view.appendTo(n),this._addChild(t)}else this._view=void 0},this),r=_.bind(function(){this.trigger("change:view:end",t,o,e)},this),e.transition?e.transition(t,o,n,i,r):(i(),n(),r()),t)},getView:function(){return this._view}}),Handlebars.registerHelper("layout-element",function(t){var n=d(t).view;if(!n.getView)throw new Error(e("layout-element-helper"));return t.hash[Ce]=n.cid,p(t.hash),new Handlebars.SafeString(se.Util.tag.call(this,t.hash,"",this))}),se.CollectionHelperView=se.CollectionView.extend({events:{"rendered:item":Z("rendered:item"),"rendered:collection":Z("rendered:collection"),"rendered:empty":Z("rendered:empty")},getCollectionElement:function(){return this.$el},constructor:function(t){t.options["item-template"]&&(t.itemTemplate=se.Util.getTemplate(t.options["item-template"])),t.options["empty-template"]&&(t.emptyTemplate=se.Util.getTemplate(t.options["empty-template"])),!t.itemTemplate&&t.template&&t.template!==Handlebars.VM.noop&&(t.itemTemplate=t.template,t.template=Handlebars.VM.noop),!t.emptyTemplate&&t.inverse&&t.inverse!==Handlebars.VM.noop&&(t.emptyTemplate=t.inverse,t.inverse=Handlebars.VM.noop);var e=_.isFunction(t.itemContext),n=_.isFunction(t.itemFilter),i=se.HelperView.call(this,t);return e?this.itemContext=_.bind(this.itemContext,this.parent):_.isString(this.itemContext)&&(this.itemContext=_.bind(this.parent[this.itemContext],this.parent)),n?this.itemFilter=_.bind(this.itemFilter,this.parent):_.isString(this.itemFilter)&&(this.itemFilter=_.bind(this.parent[this.itemFilter],this.parent)),this.parent.name&&(this.emptyView||this.parent.renderEmpty||(this.emptyView=se.Util.getViewClass(this.parent.name+"-empty",!0)),this.emptyTemplate||this.parent.renderEmpty||(this.emptyTemplate=se.Util.getTemplate(this.parent.name+"-empty",!0)),this.itemView||this.parent.renderItem||(this.itemView=se.Util.getViewClass(this.parent.name+"-item",!0)),this.itemTemplate||this.parent.renderItem||(this.itemTemplate=se.Util.getTemplate(this.parent.name+"-item",!!this.itemView))),i},setAsPrimaryCollectionHelper:function(){_.each(Te,function(t){W.call(this,t)},this);var t=this;_.each(["itemFilter","itemContext","renderItem","renderEmpty"],function(e){t.parent[e]&&(t[e]=function(){return t.parent[e].apply(t.parent,arguments)
})})}}),_.extend(se.CollectionHelperView.prototype,pe),se.CollectionHelperView.attributeWhiteList={"item-context":"itemContext","item-filter":"itemFilter","item-template":"itemTemplate","empty-template":"emptyTemplate","item-view":"itemView","empty-view":"emptyView","empty-class":"emptyClass"};var Te=["itemTemplate","itemView","emptyTemplate","emptyView"];Handlebars.registerViewHelper("collection",se.CollectionHelperView,function(t,e){1===arguments.length&&(e=t,t=e.parent.collection,t&&e.setAsPrimaryCollectionHelper(),e.$el.attr(we,"true"),e.listenTo(e.parent,"change:data-object",function(t,n){"collection"===t&&(e.setAsPrimaryCollectionHelper(),e.setCollection(n))})),t&&e.setCollection(t)}),Handlebars.registerHelper("collection-element",function(t){if(!d(t).view.renderCollection)throw new Error(e("collection-element-helper"));var n=t.hash;return p(n),n.tagName=n.tagName||"div",n[we]=!0,new Handlebars.SafeString(se.Util.tag.call(this,n,"",this))}),Handlebars.registerHelper("empty",function(t,e){1===arguments.length&&(e=t);var n=d(e).view;return 1===arguments.length&&(t=n.model),n._emptyListeners||(n._emptyListeners={}),t&&!n._emptyListeners[t.cid]&&t.models&&"length"in t&&(n._emptyListeners[t.cid]=!0,n.listenTo(t,"remove",function(){0===t.length&&n.render()}),n.listenTo(t,"add",function(){1===t.length&&n.render()}),n.listenTo(t,"reset",function(){n.render()})),!t||t.isEmpty()?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("template",function(t,e){var n=_.extend({fn:e&&e.fn},this,e?e.hash:{}),i=d(e).view.renderTemplate(t,n);return new Handlebars.SafeString(i)}),Handlebars.registerHelper("yield",function(t){return d(t).yield&&t.data.yield()}),Handlebars.registerHelper("url",function(t){var e;if(arguments.length>2)e=_.map(_.head(arguments,arguments.length-1),encodeURIComponent).join("/");else{var n=arguments[1],i=n&&n.hash||n;e=i&&i["expand-tokens"]?se.Util.expandToken(t,this):t}if(Backbone.history._hasPushState){var r=Backbone.history.options.root;return"/"===r&&"/"===e.substr(0,1)?e:r+e}return"#"+e}),Handlebars.registerViewHelper("view",{factory:function(t,e){var n=t.length>=1?t[0]:se.View;return se.Util.getViewInstance(n,e.options)},modifyHTMLAttributes:function(t,e){t.tagName=e.el.tagName.toLowerCase()},callback:function(t){var n=arguments[arguments.length-1],i=n._helperOptions.options,r=n.cid;if(!_.isString(t)&&i.hash&&_.keys(i.hash).length>0)throw new Error(e("view-helper-hash-args"));i.fn&&(de[r]=i.fn)}});var ke="data-call-method",Oe="data-trigger-event";Handlebars.registerHelper("button",function(t,n){1===arguments.length&&(n=t,t=n.hash.method);var i=n.hash,r=i["expand-tokens"];if(delete i["expand-tokens"],!t&&!n.hash.trigger)throw new Error(e("button-trigger"));return p(i),i.tagName=i.tagName||"button",i.trigger&&(i[Oe]=i.trigger),delete i.trigger,t&&(i[ke]=t),new Handlebars.SafeString(se.Util.tag(i,n.fn?n.fn(this):"",r?this:null))}),Handlebars.registerHelper("link",function(){var t=_.toArray(arguments),n=t.pop(),i=n.hash,r=0===t.length?[i.href]:t,o=i["expand-tokens"];if(delete i["expand-tokens"],!r[0]&&""!==r[0])throw new Error(e("link-href"));return p(i),r.push(n),i.href=Handlebars.helpers.url.apply(this,r),i.tagName=i.tagName||"a",i.trigger&&(i[Oe]=n.hash.trigger),delete i.trigger,i[ke]="_anchorClick",new Handlebars.SafeString(se.Util.tag(i,n.fn?n.fn(this):"",o?this:null))});var je,Se="["+ke+"], ["+Oe+"]";$(document).ready(function(){se._fastClickEventName||Q()});var He="data-element-tmp";Handlebars.registerHelper("element",function(t,e){p(e.hash);var n=_.uniqueId("element"),i=d(e).view;return e.hash[He]=n,i._elementsByCid||(i._elementsByCid={}),i._elementsByCid[n]=t,new Handlebars.SafeString(se.Util.tag(e.hash))}),se.View.on("append",function(t,e){(t||this.$el).find("["+He+"]").forEach(function(t){var n=$(t),i=n.attr(He),r=this._elementsByCid[i];_.isFunction(r)&&(r=r.call(this)),n.replaceWith(r),e&&e(r)},this)}),Handlebars.registerHelper("super",function(t){var n=d(t).view,i=n.constructor&&n.constructor.__super__;if(i){var r=i.template;if(!r){if(!i.name)throw new Error(e("super-parent"));r=i.name}return _.isString(r)&&(r=se.Util.getTemplate(r,!1)),new Handlebars.SafeString(r(this,t))}return""});var Ve,Ne="load:start",$e="load:end";se.setRootObject=function(t){Ve=t},se.loadHandler=function(t,e,n){var i=_.uniqueId("load");return function(r,o,s){function a(){if(!u.timeout||u.run){var e=void 0!==l._loadingTimeoutDuration?l._loadingTimeoutDuration:se.View.prototype._loadingTimeoutDuration;u.timeout=setTimeout(function(){try{u.events.length&&(u.run=!0,t.call(l,u.message,u.background,u))}catch(e){se.onException("loadStart",e)}},1e3*e)}}var l=n||this;l._loadInfo=l._loadInfo||{};var u=l._loadInfo[i];u?(clearTimeout(u.endTimeout),u.message=r,!o&&u.background&&(u.background=!1,a())):(u=l._loadInfo[i]=_.extend({isLoading:function(){return u.events.length},cid:i,events:[],timeout:0,message:r,background:!!o},Backbone.Events),a()),_.indexOf(u.events,s)>=0||(u.events.push(s),s.on($e,function c(){var t=l._loadingTimeoutEndDuration;void 0===t&&(t=se.View.prototype._loadingTimeoutEndDuration);var n=u.events,r=_.indexOf(n,s);r>=0&&!s.isLoading()&&(n.splice(r,1),_.indexOf(n,s)<0&&s.off($e,c)),n.length||(clearTimeout(u.endTimeout),u.endTimeout=setTimeout(function(){try{n.length||(u.run&&(e&&e.call(l,u.background,u),u.trigger($e,u)),clearTimeout(u.timeout),u=l._loadInfo[i]=void 0)}catch(t){se.onException("loadEnd",t)}},1e3*t))}))}},se.forwardLoadEvents=function(t,e,n){function i(r,o,s){n&&t.off(Ne,i),e.trigger(Ne,r,o,s)}return t.on(Ne,i),{off:function(){t.off(Ne,i)}}},se.mixinLoadable=function(t,e){_.extend(t,{_loadingClassName:"loading",_loadingTimeoutDuration:.33,_loadingTimeoutEndDuration:.1,onLoadStart:function(t,n,i){var r=e?this.parent:this;r&&r.el&&(r.nonBlockingLoad||n||!Ve||Ve===this||Ve.trigger(Ne,t,n,i),r._isLoading=!0,$(r.el).addClass(r._loadingClassName),r.trigger("change:load-state","start",n))},onLoadEnd:function(){var t=e?this.parent:this;t&&t.el&&(t._isLoading=!1,$(t.el).removeClass(t._loadingClassName),t.trigger("change:load-state","end"))}})},se.mixinLoadableEvents=function(t,e){_.extend(t,{_loadCount:0,isLoading:function(){return this._loadCount>0},loadStart:function(t,n){this._loadCount++;var i=e?this.parent:this;i.trigger(Ne,t,n,i)},loadEnd:function(){this._loadCount--;var t=e?this.parent:this;t.trigger($e,t)}})},se.mixinLoadable(se.View.prototype),se.mixinLoadableEvents(se.View.prototype),se.HelperView&&(se.mixinLoadable(se.HelperView.prototype,!0),se.mixinLoadableEvents(se.HelperView.prototype,!0)),se.CollectionHelperView&&(se.mixinLoadable(se.CollectionHelperView.prototype,!0),se.mixinLoadableEvents(se.CollectionHelperView.prototype,!0)),se.sync=function(t,e,n){var i=this,r=n.complete;return n.complete=function(){i._request=void 0,i._aborted=!1,r&&r.apply(this,arguments)},this._request=Backbone.sync.apply(this,arguments),this._request};var Ae=[];se.Model&&Ae.push(se.Model),se.Collection&&Ae.push(se.Collection),_.each(Ae,function(t){var e=t.prototype.fetch;se.mixinLoadableEvents(t.prototype,!1),_.extend(t.prototype,{sync:se.sync,fetch:function(n){function i(t){var e=n[t];n[t]=function(){r.loadEnd(),e&&e.apply(this,arguments)}}if(n=n||{},t===se.Collection&&(_.find(["reset","remove","add","update"],function(t){return!_.isUndefined(n[t])})||(n.reset=!0)),!n.loadTriggered){var r=this;i("success"),i("error"),r.loadStart(void 0,n.background)}return Y.call(this,n||{},e)},load:function(t,e,n){2!==arguments.length||_.isFunction(e)||(n=e,e=!1),n=n||{},n.background||this.isPopulated()||!Ve||(this.isLoading()?Ve.trigger(Ne,n.message,n.background,this):se.forwardLoadEvents(this,Ve,!0)),K.call(this,t,e,n)}})}),se.Util.bindToRoute=G,se.View.prototype._modifyDataObjectOptions=function(t,e){return e.ignoreErrors=this.ignoreFetchError,e.background=this.nonBlockingLoad,e},se.HelperView.prototype._modifyDataObjectOptions=se.CollectionHelperView.prototype._modifyDataObjectOptions=function(t,e){return e.ignoreErrors=this.parent.ignoreFetchError,e.background=this.parent.nonBlockingLoad,e},ae.collection.loading=function(){var t=this.loadingView,e=this.loadingTemplate,n=this.loadingPlacement;if(t||e){var i=se.loadHandler(_.bind(function(){var i;if(0===this.collection.length&&this.$el.empty(),t){var r=se.Util.getViewInstance(t);this._addChild(r),e?r.render(e):r.render(),i=r}else i=this.renderTemplate(e);var o=n?n.call(this):this.collection.length;this.appendItem(i,o),this.$el.children().eq(o).attr("data-loading-element",this.collection.cid)},this),_.bind(function(){this.$el.find('[data-loading-element="'+this.collection.cid+'"]').remove()},this),this.collection);this.listenTo(this.collection,"load:start",i)}},se.CollectionHelperView&&_.extend(se.CollectionHelperView.attributeWhiteList,{"loading-template":"loadingTemplate","loading-view":"loadingView","loading-placement":"loadingPlacement"}),se.View.on({"load:start":se.loadHandler(function(t,e,n){this.onLoadStart(t,e,n)},function(t,e){this.onLoadEnd(e)}),collection:{"load:start":function(t,e,n){this.trigger(Ne,t,e,n)}},model:{"load:start":function(t,e,n){this.trigger(Ne,t,e,n)}}}),Handlebars.registerHelper("loading",function(t){var e=d(t).view;return e.off("change:load-state",ee,e),e.on("change:load-state",ee,e),e._isLoading?t.fn(this):t.inverse(this)});var Ie=/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());Ie&&(se.View.on("before:append",function(){this._renderCount>0&&(_.each(this._elementsByCid,function(t){$(t).detach()}),_.each(this.children,function(t){t.$el.detach()}))}),se.CollectionView.prototype._replaceHTML=function(t){if(!this.getObjectOptions(this.collection)||!this._renderCount)return ye.call(this,t);var e,n=this.getCollectionElement().clone(!0,!0);e=ye.call(this,t),n.attr("data-view-cid")||this.getCollectionElement().replaceWith(n)})}(),define("thorax",["handlebars","backbone"],function(t){return function(){var e;return e||t.Thorax}}(this)),define("layout-view",["thorax"],function(t){return t.LayoutView.extend({})}),define("hbs",["handlebars"],function(t){var e={},n=".hbs";return{load:function(i,r,o,s){var a=s.hbs&&s.hbs.templateExtension?s.hbs.templateExtension:n;if(s.isBuild){var l=nodeRequire("fs"),u=s.dirBaseUrl+"/"+i+a;e[i]=l.readFileSync(u).toString(),o()}else r(["text!"+i+a],function(e){o(t.compile(e))})},write:function(n,i,r){var o=t.precompile(e[i]);r("define('hbs!"+i+"', ['handlebars'], function(Handlebars){ \nreturn Handlebars.template("+o.toString()+");\n});\n")}}}),define("hbs!templates/root",["handlebars"],function(t){return t.template(function(t,e,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),r=r||{};var o,s="",a="function",l=this.escapeExpression;return(o=n["layout-element"])?o=o.call(e,{hash:{},data:r}):(o=e["layout-element"],o=typeof o===a?o.apply(e):o),s+=l(o)+"\n"})}),define("views/root",["underscore","layout-view","hbs!templates/root"],function(t,e,n){var i=e.extend({name:"root",template:n});return i.getInstance=t.once(function(t){var e=new i;return e.appendTo(t||document.body),e}),i}),define("view",["thorax"],function(t){return t.View.extend({})}),define("hbs!templates/header",["handlebars"],function(t){return t.template(function(t,e,n,i,r){function o(){return"Nate Hunzaker"}function s(){return"home"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),r=r||{};var a,l,u,c="",h=this,f=n.helperMissing;return c+='<nav role="navigation" class="page">\n	',u={hash:{id:"logo"},inverse:h.noop,fn:h.program(1,o,r),data:r},a=n.link||e.link,l=a?a.call(e,"",u):f.call(e,"link","",u),(l||0===l)&&(c+=l),c+="\n	<ul>\n		<li>",u={hash:{},inverse:h.noop,fn:h.program(3,s,r),data:r},a=n.link||e.link,l=a?a.call(e,"",u):f.call(e,"link","",u),(l||0===l)&&(c+=l),c+='</li>\n		<li><a href="http://www.github.com/nhunzaker" title="Visit archives">github</a></li>\n		<li><a href="http://feeds.feedburner.com/natehunzaker">rss</a></li>\n	</ul>\n</nav>\n'})}),define("views/header",["underscore","view","hbs!templates/header"],function(t,e,n){var i=e.extend({name:"header",template:n});return i.getInstance=t.once(function(t){var e=new i;return e.appendTo(t||document.body),e}),i}),define("model",["thorax"],function(t){return t.Model.extend({})}),define("models/post",["model"],function(t){return t.extend({urlRoot:"http://localhost:1337/posts",name:"post"})}),define("collection",["thorax"],function(t){return t.Collection.extend({})}),define("collections/posts",["collection"],function(t){return t.extend({url:"http://localhost:1337/posts",name:"posts",comparator:"date"})}),define("hbs!templates/posts/index",["handlebars"],function(t){return t.template(function(t,e,n,i,r){function o(){return'\n	<div class="home">\n		Fetching content...\n	</div>\n'}function s(t,e){var i,r,o,s="";return s+="\n	",o={hash:{tag:"section","class":"home",role:"content"},inverse:m.noop,fn:m.program(4,a,e),data:e},i=n.collection||t.collection,r=i?i.call(t,o):p.call(t,"collection",o),(r||0===r)&&(s+=r),s+="\n"}function a(t,e){var i,r,o,s="";return s+='\n		<article class="preview">\n			<time>',o={hash:{},data:e},s+=d((i=n["pretty-date"]||t["pretty-date"],i?i.call(t,t.date,o):p.call(t,"pretty-date",t.date,o)))+'</time>\n			<section class="content">\n				<h2 class="title">\n					',o={hash:{"expand-tokens":!0},inverse:m.noop,fn:m.program(5,l,e),data:e},i=n.link||t.link,r=i?i.call(t,"posts/{{id}}",o):p.call(t,"link","posts/{{id}}",o),(r||0===r)&&(s+=r),s+="\n				</h2>\n			</section>\n		</article>\n	"}function l(t,e){var i;return(i=n.title)?i=i.call(t,{hash:{},data:e}):(i=t.title,i=typeof i===f?i.apply(t):i),d(i)}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),r=r||{};var u,c,h="",f="function",d=this.escapeExpression,p=n.helperMissing,m=this,g=n.blockHelperMissing;return c={hash:{},inverse:m.program(3,s,r),fn:m.program(1,o,r),data:r},(u=n.loading)?u=u.call(e,c):(u=e.loading,u=typeof u===f?u.apply(e):u),n.loading||(u=g.call(e,u,c)),(u||0===u)&&(h+=u),h+="\n"})}),define("views/posts/index",["view","hbs!templates/posts/index"],function(t,e){return t.extend({name:"posts/index",template:e})}),define("hbs!templates/posts/show",["handlebars"],function(t){return t.template(function(t,e,n,i,r){function o(){return"\n	Fetching content\n"}function s(t,e){var i,r,o,s="";return s+='\n	<article role="content" class="single">\n		<header>\n			<h1>',(i=n.title)?i=i.call(t,{hash:{},data:e}):(i=t.title,i=typeof i===f?i.apply(t):i),s+=d(i)+'</h1>\n			<div class="meta">\n				<time datetime="',(i=n.date)?i=i.call(t,{hash:{},data:e}):(i=t.date,i=typeof i===f?i.apply(t):i),s+=d(i)+'" class="date">',o={hash:{},data:e},s+=d((i=n["pretty-date"]||t["pretty-date"],i?i.call(t,t.date,o):m.call(t,"pretty-date",t.date,o)))+"</time>\n				&lsaquo;\n				",o={hash:{},inverse:p.noop,fn:p.program(4,a,e),data:e},(r=n.categories)?r=r.call(t,o):(r=t.categories,r=typeof r===f?r.apply(t):r),n.categories||(r=g.call(t,r,o)),(r||0===r)&&(s+=r),s+='\n				&rsaquo;\n			</div>\n		</header>\n\n		<section class="body">\n			<p>',(r=n.content)?r=r.call(t,{hash:{},data:e}):(r=t.content,r=typeof r===f?r.apply(t):r),(r||0===r)&&(s+=r),s+="</p>\n		</section>\n	</article>\n"}function a(t,e){var i,r,o,s="";return s+="\n					",o={hash:{"expand-tokens":!0},inverse:p.noop,fn:p.program(5,l,e),data:e},i=n.link||t.link,r=i?i.call(t,"categories/{{this}}",o):m.call(t,"link","categories/{{this}}",o),(r||0===r)&&(s+=r),s+="\n				"}function l(t){return d(typeof t===f?t.apply(t):t)}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),r=r||{};var u,c,h="",f="function",d=this.escapeExpression,p=this,m=n.helperMissing,g=n.blockHelperMissing;return c={hash:{},inverse:p.program(3,s,r),fn:p.program(1,o,r),data:r},(u=n.loading)?u=u.call(e,c):(u=e.loading,u=typeof u===f?u.apply(e):u),n.loading||(u=g.call(e,u,c)),(u||0===u)&&(h+=u),h+="\n"})}),define("views/posts/show",["view","hbs!templates/posts/show"],function(t,e){return t.extend({name:"posts/show",template:e})}),define("routers/posts",["backbone","models/post","collections/posts","views/root","views/posts/index","views/posts/show"],function(t,e,n,i,r,o){return t.Router.extend({routes:{"":"index","posts/:slug":"show"},index:function(){var t=new r({collection:new n});i.getInstance().setView(t)},show:function(t){var n=new o({model:new e({id:t})});i.getInstance().setView(n)}})}),define("collections/categories",["collection"],function(t){return t.extend({name:"categories",comparator:"date",url:function(){return"http://localhost:1337/categories/"+this.where}})}),define("routers/categories",["backbone","collections/categories","views/root","views/posts/index"],function(t,e,n,i){return t.Router.extend({routes:{"categories/:slug":"show"},show:function(t){var r=new e;r.where=t;var o=new i({collection:r});n.getInstance().setView(o)}})}),define("helpers",["handlebars","thorax"],function(t){t.registerHelper("pretty-date",function(e){var n=new Date(e),i=[n.getMonth(),n.getDate(),n.getFullYear()].join("/");return new t.SafeString(i)}),t.registerViewHelper("on",function(t,e){e.parent.on(t,function(){e.render()})})}),require(["zepto","backbone","views/root","views/header","routers/posts","routers/categories","helpers"],function(t,e,n,i,r,o){t(function(){e.history.start({pushState:!0,root:"/",silent:!0}),n.getInstance("#region-main"),i.getInstance("#region-header");new r,new o;e.history.loadUrl()})}),define("main",function(){});